# [0098. å‡½æ•°ç±»å‹çš„å¤šç§å£°æ˜æ–¹å¼](https://github.com/tnotesjs/TNotes.typescript/tree/main/notes/0098.%20%E5%87%BD%E6%95%B0%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%A4%9A%E7%A7%8D%E5%A3%B0%E6%98%8E%E6%96%B9%E5%BC%8F)

<!-- region:toc -->

- [1. ğŸ¯ æœ¬èŠ‚å†…å®¹](#1--æœ¬èŠ‚å†…å®¹)
- [2. ğŸ«§ è¯„ä»·](#2--è¯„ä»·)
- [3. ğŸ¤” 3 ç§å£°æ˜å‡½æ•°ç±»å‹çš„è¯­æ³•åˆ†åˆ«æ˜¯ï¼Ÿ](#3--3-ç§å£°æ˜å‡½æ•°ç±»å‹çš„è¯­æ³•åˆ†åˆ«æ˜¯)
- [4. ğŸ¤” 3 ç§ä¸åŒå†™æ³•çš„åŒºåˆ«æ˜¯?](#4--3-ç§ä¸åŒå†™æ³•çš„åŒºåˆ«æ˜¯)
- [5. ğŸ¤” 3 ç§å†™æ³•çš„çº¦æŸç¨‹åº¦æœ‰åŒºåˆ«å—ï¼Ÿ](#5--3-ç§å†™æ³•çš„çº¦æŸç¨‹åº¦æœ‰åŒºåˆ«å—)
- [6. ğŸ¤” è°ƒç”¨ç­¾åæœ‰å•¥ç‰¹ç‚¹ï¼Ÿ](#6--è°ƒç”¨ç­¾åæœ‰å•¥ç‰¹ç‚¹)
- [7. ğŸ”— å¼•ç”¨](#7--å¼•ç”¨)

<!-- endregion:toc -->

## 1. ğŸ¯ æœ¬èŠ‚å†…å®¹

- 3 ç§å£°æ˜å‡½æ•°ç±»å‹çš„æ–¹å¼åŠå…¶åŒºåˆ«

## 2. ğŸ«§ è¯„ä»·

TypeScript æä¾›äº† 3 ç§æ–¹å¼æ¥æè¿°å‡½æ•°ç±»å‹ï¼š

1. å‡½æ•°ç±»å‹å£°æ˜ï¼ˆParameter Type Annotations + Return Type Annotationsï¼‰ï¼šå‚æ•°ç±»å‹æ³¨è§£ + è¿”å›å€¼ç±»å‹æ³¨è§£
2. å‡½æ•°ç±»å‹è¡¨è¾¾å¼ï¼ˆFunction Type Expressionï¼‰ï¼šä½¿ç”¨ç®­å¤´è¯­æ³• `=>`
3. è°ƒç”¨ç­¾åï¼ˆCall Signatureï¼‰ï¼šåœ¨å¯¹è±¡ç±»å‹ä¸­ä½¿ç”¨æ–¹æ³•è¯­æ³•

æœ¬èŠ‚ä¸»è¦ä»‹ç»ä¸Šè¿°è¿™ 3 ç§å†™æ³•çš„è¯­æ³•åŠå…¶ç»†å¾®çš„åŒºåˆ«ã€‚

## 3. ğŸ¤” 3 ç§å£°æ˜å‡½æ•°ç±»å‹çš„è¯­æ³•åˆ†åˆ«æ˜¯ï¼Ÿ

1. å‡½æ•°ç±»å‹å£°æ˜ï¼ˆParameter Type Annotations + Return Type Annotationsï¼‰ï¼šå‚æ•°ç±»å‹æ³¨è§£ + è¿”å›å€¼ç±»å‹æ³¨è§£
2. å‡½æ•°ç±»å‹è¡¨è¾¾å¼ï¼ˆFunction Type Expressionï¼‰ï¼šä½¿ç”¨ç®­å¤´è¯­æ³• `=>`
3. è°ƒç”¨ç­¾åï¼ˆCall Signatureï¼‰ï¼šåœ¨å¯¹è±¡ç±»å‹ä¸­ä½¿ç”¨æ–¹æ³•è¯­æ³•

::: code-group

```ts [1]
// å‡½æ•°ç±»å‹å£°æ˜ï¼ˆParameter Type Annotations + Return Type Annotationsï¼‰
function greet(name: string): void {
  console.log('Hello, ' + name.toUpperCase() + '!!')
}
```

```ts [2]
// å‡½æ•°ç±»å‹è¡¨è¾¾å¼ï¼ˆFunction Type Expressionï¼‰
type Add = (a: number, b: number) => number
const add: Add = (a, b) => a + b
```

```ts [3]
// è°ƒç”¨ç­¾åï¼ˆCall Signatureï¼‰
// ç±»å‹åˆ«åå½¢å¼ï¼š
type Add = {
  (a: number, b: number): number
}
// æ¥å£å½¢å¼ï¼š
// interface Add = {
//   (a: number, b: number): number
// }
const add: Add = (a, b) => a + b
```

:::

## 4. ğŸ¤” 3 ç§ä¸åŒå†™æ³•çš„åŒºåˆ«æ˜¯?

| ç‰¹æ€§ | å‡½æ•°ç±»å‹å£°æ˜ | å‡½æ•°ç±»å‹è¡¨è¾¾å¼ | è°ƒç”¨ç­¾å |
| --- | --- | --- | --- |
| è¯­æ³• | `function(params): Type` | `(params) => ReturnType` | `{ (params): ReturnType }` |
| ä½ç½® | å†…åµŒ | åˆ†ç¦» | åˆ†ç¦» |
| ç®€æ´æ€§ | âœ… ç®€æ´ | âœ… ç®€æ´ | âŒ è¾ƒç¹ç |
| ç±»å‹å¤ç”¨ | âŒ ä¸æ”¯æŒ | âœ… æ”¯æŒ | âœ… æ”¯æŒ |
| æ·»åŠ å±æ€§ | âŒ ä¸æ”¯æŒ | âŒ ä¸æ”¯æŒ | âœ… æ”¯æŒ |
| å‡½æ•°é‡è½½ | âœ… æ”¯æŒ | âŒ ä¸æ”¯æŒ | âœ… æ”¯æŒ |
| æ„é€ ç­¾å | âŒ ä¸æ”¯æŒ | âœ… æ”¯æŒ | âœ… æ”¯æŒ |
| æ¨æ–­èƒ½åŠ› | âœ… å¼º | âœ… å¼º | âœ… å¼º |
| çº¦æŸå¼ºåº¦ | âœ… å¼º | âŒ å¼± | âŒ å¼± |
| é€‚ç”¨åœºæ™¯ | å•æ¬¡ä½¿ç”¨çš„å‡½æ•°å®šä¹‰ | ç®€å•çš„å¯å¤ç”¨å‡½æ•°ç±»å‹ | å¤æ‚çš„å¯è°ƒç”¨å¯¹è±¡ç±»å‹ |

æ ¸å¿ƒåŒºåˆ«è¯´æ˜ï¼š

1. å‡½æ•°ç±»å‹å£°æ˜ï¼šç›´æ¥åœ¨å‡½æ•°å®šä¹‰æ—¶æ ‡æ³¨ç±»å‹ï¼Œæœ€å¸¸ç”¨ï¼Œç¼ºç‚¹æ˜¯ä¸èƒ½å¤ç”¨
2. å‡½æ•°ç±»å‹è¡¨è¾¾å¼ï¼šä½¿ç”¨ `=>` è¯­æ³•ï¼Œç®€æ´ä¸”å¯å¤ç”¨ï¼Œé€‚åˆå¤§å¤šæ•°åœºæ™¯
3. è°ƒç”¨ç­¾åï¼šä½¿ç”¨ `{}` åŒ…è£¹ï¼ŒåŠŸèƒ½æœ€å¼ºå¤§ï¼Œå¯ä»¥æè¿°å‡½æ•°çš„é™„åŠ å±æ€§å’Œå¤šä¸ªé‡è½½

å†³ç­–å»ºè®®ï¼š

- ä¼˜å…ˆè€ƒè™‘å‡½æ•°ç±»å‹å£°æ˜ã€å‡½æ•°ç±»å‹è¡¨è¾¾å¼
- åªæœ‰åœ¨éœ€è¦é¢å¤–åŠŸèƒ½æ—¶æ‰ä½¿ç”¨è°ƒç”¨ç­¾åï¼ˆå±æ€§ã€é‡è½½ã€æ„é€ ï¼‰
- é¿å…è¿‡åº¦ä½¿ç”¨è°ƒç”¨ç­¾åï¼Œä¿æŒä»£ç ç®€æ´æ€§
- æ¥å£ vs ç±»å‹åˆ«åï¼šä¸¤è€…éƒ½å¯ä»¥å®šä¹‰è°ƒç”¨ç­¾åï¼Œé€‰æ‹©å›¢é˜Ÿç»Ÿä¸€çš„é£æ ¼å³å¯

## 5. ğŸ¤” 3 ç§å†™æ³•çš„çº¦æŸç¨‹åº¦æœ‰åŒºåˆ«å—ï¼Ÿ

æ˜¯çš„ï¼Œå‡½æ•°ç±»å‹å£°æ˜æ˜¯å¼ºçº¦æŸï¼Œå…¶å®ƒä¸¤ä¸ªæ˜¯å¼±çº¦æŸã€‚

å¦‚æœä½ åœ¨å¼€å‘æ—¶å‘ç°ç›¸åŒçš„ç±»å‹æè¿°ï¼Œä½†æ˜¯å‡ºç°äº†ä¸åŒçš„è¡¨ç°è¡Œä¸ºï¼Œé‚£ä¹ˆå¾ˆå¯èƒ½å°±æ˜¯ä½ çš„å‡½æ•°ç±»å‹å£°æ˜æ–¹å¼ä¸ä¸€è‡´å¯¼è‡´çš„ã€‚

è¿™é‡Œä»¥ void è¿”å›å€¼ç±»å‹ä¸ºä¾‹ï¼š

```ts
// å‡½æ•°ç±»å‹å£°æ˜ - å¼ºçº¦æŸ
// å¿…é¡»è¿”å›å’Œ void å…¼å®¹çš„ç±»å‹
function strict(): void {
  return 123 // âŒ Error: Type 'number' is not assignable to type 'void'
}

// å‡½æ•°ç±»å‹è¡¨è¾¾å¼ - å¼±çº¦æŸ
// å¯ä»¥è¿”å›ä»»ä½•å€¼
type VoidFunc = () => void
const voidFn: VoidFunc = () => {
  return 123 // âœ… OK
}

// è°ƒç”¨ç­¾å - å¼±çº¦æŸ
// å¯ä»¥è¿”å›ä»»ä½•å€¼
interface VoidFunc2 {
  (): void
}
const voidFn2: VoidFunc = () => {
  return 123 // âœ… OK
}
```

è¿™æ˜¯ TS çš„è®¾è®¡å“²å­¦ï¼šä½†å‡¡æ˜¯ä½ èƒ½ç›´æ¥æ§åˆ¶çš„ï¼Œéƒ½åº”è¯¥æ˜¯å¼ºçº¦æŸï¼Œä½†å‡¡æ˜¯ä½ å¯èƒ½æ— æ³•æ§åˆ¶çš„ï¼Œéƒ½åº”è¯¥æ˜¯å¼±çº¦æŸã€‚

ä¸¾ä¸€åä¸‰ï¼šå¯¹è±¡çš„é¢å¤–å±æ€§æ£€æŸ¥ - ä¹Ÿæ˜¯åŒæ ·çš„é“ç†ã€‚

```ts
type Obj = { a: number }

const obj: Obj = { a: 1 } // âœ… OK
const obj2: Obj = { a: 1, b: 2 } // âŒ Error Object literal may only specify known properties, and 'b' does not exist in type 'Obj'.(2353)
// { a: 1, b: 2 } è¿™ä¸ªå­—é¢é‡æ˜¯ä½ ç›´æ¥å†™å‡ºæ¥çš„ï¼Œæ˜¯ä½ èƒ½æ§åˆ¶çš„
// ä½ å¿…é¡»æŒ‰ç…§ä¸¥æ ¼çš„ Obj ç±»å‹æ¥ä¹¦å†™

const obj3 = { a: 1, b: 2 }
const obj4: Obj = obj3 // âœ… OK
// obj3 è¿™ä¸ªæ•°æ®å¯èƒ½æ¥è‡ªå¤–éƒ¨ï¼Œæ¯”å¦‚åç«¯æ¥å£è¿”å›çš„æ•°æ®ï¼Œå¯èƒ½ä¸æ˜¯ä½ èƒ½ç›´æ¥æ§åˆ¶çš„
// å› æ­¤ï¼Œè¿™é‡Œä¼šé‡‡ç”¨å®½æ¾çš„é¸­å­ç±»å‹ç­–ç•¥æ¥åˆ¤æ–­å…¼å®¹æ€§
```

## 6. ğŸ¤” è°ƒç”¨ç­¾åæœ‰å•¥ç‰¹ç‚¹ï¼Ÿ

```ts
// âœ… 1. å¯ä»¥æ·»åŠ å±æ€§
type FuncWithProp = {
  (x: number): number
  description: string
  version: number
}

const func: FuncWithProp = Object.assign((x: number) => x * 2, {
  description: 'Double',
  version: 1,
})

// âœ… 2. å¯ä»¥æœ‰å¤šä¸ªè°ƒç”¨ç­¾åï¼ˆé‡è½½ï¼‰
type Process = {
  (x: number): number
  (x: string): string
}

// âœ… 3. å¯ä»¥ç»“åˆæ„é€ ç­¾å
type Constructor = {
  new (name: string): { name: string }
  (name: string): string
}
```

## 7. ğŸ”— å¼•ç”¨

- [TypeScript Handbook - Function Types][1]
- [TypeScript Handbook - Call Signatures][2]
- [TypeScript Deep Dive - Function Types][3]
- [TypeScript Handbook - Everyday Types - Function][4]

[1]: https://www.typescriptlang.org/docs/handbook/2/functions.html
[2]: https://www.typescriptlang.org/docs/handbook/2/functions.html#call-signatures
[3]: https://basarat.gitbook.io/typescript/type-system/functions
[4]: https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#functions

# [0061. ç±»çš„é™æ€æˆå‘˜](https://github.com/tnotesjs/TNotes.typescript/tree/main/notes/0061.%20%E7%B1%BB%E7%9A%84%E9%9D%99%E6%80%81%E6%88%90%E5%91%98)

<!-- region:toc -->

- [1. ğŸ¯ æœ¬èŠ‚å†…å®¹](#1--æœ¬èŠ‚å†…å®¹)
- [2. ğŸ«§ è¯„ä»·](#2--è¯„ä»·)
- [3. ğŸ¤” â€œç±»çš„é™æ€æˆå‘˜â€æ˜¯ä»€ä¹ˆï¼Ÿ](#3--ç±»çš„é™æ€æˆå‘˜æ˜¯ä»€ä¹ˆ)
- [4. ğŸ¤” é™æ€æˆå‘˜æ˜¯å¦å¯ä»¥è·Ÿå®ä¾‹æˆå‘˜åŒåï¼Ÿ](#4--é™æ€æˆå‘˜æ˜¯å¦å¯ä»¥è·Ÿå®ä¾‹æˆå‘˜åŒå)
- [5. ğŸ¤” â€œç±»çš„é™æ€æˆå‘˜â€å¦‚ä½•å®šä¹‰ï¼Ÿ](#5--ç±»çš„é™æ€æˆå‘˜å¦‚ä½•å®šä¹‰)
  - [5.1. static å…³é”®å­—](#51-static-å…³é”®å­—)
  - [5.2. å¯ä»¥å£°æ˜çš„åŒæ—¶å®Œæˆåˆå§‹åŒ–](#52-å¯ä»¥å£°æ˜çš„åŒæ—¶å®Œæˆåˆå§‹åŒ–)
  - [5.3. å¯ä»¥å…ˆå£°æ˜ååˆå§‹åŒ–](#53-å¯ä»¥å…ˆå£°æ˜ååˆå§‹åŒ–)
  - [5.4. å¯ä»¥ä½¿ç”¨ `Object.defineProperty` å®šä¹‰](#54-å¯ä»¥ä½¿ç”¨-objectdefineproperty-å®šä¹‰)
  - [5.5. å¼€å‘å»ºè®®](#55-å¼€å‘å»ºè®®)
- [6. ğŸ¤” é™æ€æˆå‘˜å¯ä»¥æ˜¯æŠ½è±¡çš„å—ï¼Ÿ](#6--é™æ€æˆå‘˜å¯ä»¥æ˜¯æŠ½è±¡çš„å—)

<!-- endregion:toc -->

## 1. ğŸ¯ æœ¬èŠ‚å†…å®¹

- é™æ€æˆå‘˜
- å®ä¾‹æˆå‘˜
- static å…³é”®å­—

## 2. ğŸ«§ è¯„ä»·

é™æ€æˆå‘˜æ˜¯å±äºç±»æœ¬èº«çš„æˆå‘˜ï¼Œéœ€è¦åœ¨ç±»ä¸­ä½¿ç”¨ static å…³é”®å­—åœ¨ç±»ä¸­å£°æ˜é™æ€æˆå‘˜çš„ç±»å‹ã€‚

é™æ€æˆå‘˜åˆå§‹åŒ–çš„ä¸åŒé˜¶æ®µï¼š

1. å¯ä»¥åœ¨ç±»ä¸­å®Œæˆç±»å‹å£°æ˜çš„æ—¶å€™åŒæ—¶è¿›è¡Œï¼ˆæ¨èåšæ³•ï¼‰ï¼›
2. ä¹Ÿå¯ä»¥åœ¨ç±»ä¸­å®Œæˆç±»å‹å£°æ˜ä¹‹åå†åœ¨ç±»çš„å¤–éƒ¨å¯¹å…¶è¿›è¡Œåˆå§‹åŒ–ï¼ˆä¸æ¨èï¼‰ï¼›

## 3. ğŸ¤” â€œç±»çš„é™æ€æˆå‘˜â€æ˜¯ä»€ä¹ˆï¼Ÿ

ç±»çš„é™æ€æˆå‘˜æ˜¯å±äºç±»æœ¬èº«è€Œä¸æ˜¯ç±»å®ä¾‹çš„å±æ€§æˆ–æ–¹æ³•ã€‚å®ƒä»¬ä¸ç±»çš„ç‰¹å®šå®ä¾‹æ— å…³ï¼Œè€Œæ˜¯ä¸ç±»æ•´ä½“ç›¸å…³è”ã€‚

ä¸»è¦ç‰¹ç‚¹ï¼š

- å±äºç±»æœ¬èº«ï¼šé™æ€æˆå‘˜é€šè¿‡ç±»åç›´æ¥è®¿é—®ï¼Œä¸éœ€è¦åˆ›å»ºç±»çš„å®ä¾‹
- å†…å­˜å”¯ä¸€æ€§ï¼šé™æ€æˆå‘˜åœ¨å†…å­˜ä¸­åªæœ‰ä¸€ä»½æ‹·è´
- è®¿é—®æ–¹å¼ï¼šé€šè¿‡ `ç±»å.æˆå‘˜å` çš„æ–¹å¼è®¿é—®

å¸¸è§çš„ä½¿ç”¨åœºæ™¯åŒ…æ‹¬ï¼š

- å·¥å…·æ–¹æ³•ï¼ˆå¦‚æ•°å­¦è®¡ç®—ã€æ•°æ®è½¬æ¢ç­‰ï¼‰
- è®¡æ•°å™¨ï¼ˆç»Ÿè®¡å®ä¾‹æ•°é‡ï¼‰
- é…ç½®ä¿¡æ¯ï¼ˆå…¨å±€å…±äº«çš„é…ç½®ï¼‰
- å·¥å‚æ–¹æ³•ï¼ˆåˆ›å»ºç±»å®ä¾‹çš„ç‰¹æ®Šæ–¹æ³•ï¼‰

ä¸å®ä¾‹æˆå‘˜çš„åŒºåˆ«ï¼š

- å®ä¾‹æˆå‘˜éœ€è¦é€šè¿‡ `new` åˆ›å»ºå®ä¾‹åæ‰èƒ½è®¿é—®ï¼Œé™æ€æˆå‘˜ç›´æ¥é€šè¿‡ç±»åè®¿é—®ï¼›
- å®ä¾‹æˆå‘˜æ¯ä¸ªå®ä¾‹éƒ½æœ‰ç‹¬ç«‹çš„å‰¯æœ¬ï¼Œé™æ€æˆå‘˜åªæœ‰ä¸€ä»½ï¼Œåœ¨æ‰€æœ‰å®ä¾‹é—´å…±äº«ï¼›

## 4. ğŸ¤” é™æ€æˆå‘˜æ˜¯å¦å¯ä»¥è·Ÿå®ä¾‹æˆå‘˜åŒåï¼Ÿ

æ˜¯çš„ï¼Œé™æ€æˆå‘˜å¯ä»¥ä¸å®ä¾‹æˆå‘˜åŒåã€‚

- é™æ€æˆå‘˜å±äºç±»æœ¬èº«ï¼Œé€šè¿‡ç±»åè®¿é—®
- å®ä¾‹æˆå‘˜å±äºç±»çš„å®ä¾‹ï¼Œé€šè¿‡å®ä¾‹è®¿é—®
- å³ä½¿åç§°ç›¸åŒï¼Œå®ƒä»¬ä¹Ÿæ˜¯å®Œå…¨ç‹¬ç«‹çš„æˆå‘˜

ç¤ºä¾‹ä»£ç ï¼š

```ts
class MyClass {
  static x = 0 // é™æ€å±æ€§
  x = 1 // å®ä¾‹å±æ€§ï¼ˆåŒåï¼‰

  static getX() {
    // é™æ€æ–¹æ³•
    return MyClass.x // è®¿é—®é™æ€å±æ€§
  }

  getX() {
    // å®ä¾‹æ–¹æ³•ï¼ˆåŒåï¼‰
    return this.x // è®¿é—®å®ä¾‹å±æ€§
  }
}

// è®¿é—®é™æ€æˆå‘˜
MyClass.x // 0
MyClass.getX() // 0

// è®¿é—®å®ä¾‹æˆå‘˜
const instance = new MyClass()
instance.x // 1
instance.getX() // 1
```

æ³¨æ„ï¼šè™½ç„¶æŠ€æœ¯ä¸Šå…è®¸åŒåï¼Œä½†åœ¨å®é™…å¼€å‘ä¸­åº”é¿å…è¿™ç§åšæ³•ï¼Œå› ä¸ºå¯èƒ½ä¼šé€ æˆæ··æ·†å’Œè¯¯è§£ã€‚å»ºè®®ä½¿ç”¨æ¸…æ™°æ˜ç¡®çš„å‘½åæ¥åŒºåˆ†é™æ€æˆå‘˜å’Œå®ä¾‹æˆå‘˜ã€‚

## 5. ğŸ¤” â€œç±»çš„é™æ€æˆå‘˜â€å¦‚ä½•å®šä¹‰ï¼Ÿ

â€œç±»çš„é™æ€æˆå‘˜â€çš„å®šä¹‰æ–¹å¼æœ‰å¾ˆå¤šï¼Œä¸»è¦æŒæ¡ä¸€äº›å¸¸è§çš„å†™æ³•å³å¯ã€‚

### 5.1. static å…³é”®å­—

ç±»çš„å†…éƒ¨å¯ä»¥ä½¿ç”¨ `static` å…³é”®å­—ï¼Œå®šä¹‰é™æ€æˆå‘˜ã€‚

### 5.2. å¯ä»¥å£°æ˜çš„åŒæ—¶å®Œæˆåˆå§‹åŒ–

```ts
class MyClass {
  static x = 0
  static printX() {
    console.log(MyClass.x)
  }
}
```

ç¼–è¯‘åçš„ JS å¦‚ä¸‹ï¼š

```js
'use strict'
class MyClass {
  static printX() {
    console.log(MyClass.x)
  }
}
MyClass.x = 0
```

### 5.3. å¯ä»¥å…ˆå£°æ˜ååˆå§‹åŒ–

TypeScript ä¹Ÿæ”¯æŒåœ¨ç±»å£°æ˜ä¹‹åå†æ·»åŠ é™æ€æˆå‘˜ã€‚

```ts
class MyClass {
  static x = 0

  // éœ€è¦æå‰å£°æ˜ï¼š
  static y: number
  static printValues: () => void
}

// å»¶è¿Ÿåˆå§‹åŒ–é™æ€æˆå‘˜ï¼š
// åˆå§‹åŒ–é™æ€å±æ€§
MyClass.y = 1
// åˆå§‹åŒ–é™æ€æ–¹æ³•
MyClass.printValues = function () {
  console.log(MyClass.x, MyClass.y)
}
```

ç¼–è¯‘åçš„ JS å¦‚ä¸‹ï¼š

```js
'use strict'
class MyClass {}
MyClass.x = 0
// å»¶è¿Ÿåˆå§‹åŒ–é™æ€æˆå‘˜ï¼š
// åˆå§‹åŒ–é™æ€å±æ€§
MyClass.y = 1
// åˆå§‹åŒ–é™æ€æ–¹æ³•
MyClass.printValues = function () {
  console.log(MyClass.x, MyClass.y)
}
```

æ³¨æ„ï¼šç±»å‹å£°æ˜ä¸èƒ½å°‘ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚

```ts
class MyClass {
  static x = 0
}

// âŒ æŠ¥é”™
MyClass.y = 1
// Property 'y' does not exist on type 'typeof MyClass'.(2339)

// âŒ æŠ¥é”™
MyClass.printValues = function () {
  console.log(MyClass.x, MyClass.y)
}
// Property 'printValues' does not exist on type 'typeof MyClass'.(2339)
```

### 5.4. å¯ä»¥ä½¿ç”¨ `Object.defineProperty` å®šä¹‰

```ts
class MyClass {
  static staticProperty: string
}

Object.defineProperty(MyClass, 'staticProperty', {
  value: 'Hello World',
  writable: true,
  enumerable: true,
  configurable: true,
})

console.log(MyClass.staticProperty) // è¾“å‡º: Hello World

// å¦‚æœ MyClass ä¸­æ²¡æœ‰ staticProperty çš„ç±»å‹å®šä¹‰ï¼Œä¼šæŠ¥é”™ï¼š
// Property 'staticProperty' does not exist on type 'typeof MyClass'.(2339)
```

è¿™ç§åŸå§‹çš„åšæ³•å°±å°½é‡ä¸è¦åœ¨ TS ä¸­ä½¿ç”¨äº†ï¼ŒTS è¯­è¨€æœåŠ¡çš„é™æ€æ£€æŸ¥ä¸æ”¯æŒè¿™ç§å†™æ³•çš„ç±»å‹æ¨å¯¼ã€‚æ¯”å¦‚ï¼Œä½ å¯ä»¥å°† `staticProperty` è®¾ç½®ä¸º `number` ç±»å‹ï¼Œç„¶åè§‚å¯Ÿç¨‹åºæ˜¯å¦ä¼šåœ¨æ‰§è¡Œ `Object.defineProperty` è¯­å¥çš„æ—¶å€™æŠ¥é”™ã€‚

```ts
class MyClass {
  static staticProperty: number
}

// MyClass.staticProperty = 'Hello World' // âŒ æŠ¥é”™
// è¿™ä¹ˆå†™ä¼šæŠ¥é”™ï¼šType 'string' is not assignable to type 'number'.(2322)

// âœ… ä¸æŠ¥é”™
Object.defineProperty(MyClass, 'staticProperty', {
  value: 'Hello World',
  writable: true,
  enumerable: true,
  configurable: true,
})

console.log(MyClass.staticProperty)
```

`Object.defineProperty` å†™èµ·æ¥å³éº»çƒ¦åˆå±é™©ï¼Œéå¿…è¦æƒ…å†µï¼Œèƒ½ä¸ç”¨å°±ä¸ç”¨ã€‚

### 5.5. å¼€å‘å»ºè®®

1. å»ºè®®ä¼˜å…ˆåœ¨ç±»å£°æ˜ä¸­ç›´æ¥å®šä¹‰é™æ€æˆå‘˜å¹¶å®Œæˆåˆå§‹åŒ–
2. å»¶è¿Ÿå®šä¹‰å¯èƒ½ä¼šå½±å“ä»£ç çš„å¯è¯»æ€§å’Œç»´æŠ¤æ€§ï¼Œéå¿…è¦å°½å¯èƒ½ä¸è¦å°†é™æ€ç±»å‹å®šä¹‰å’Œç±»çš„å®šä¹‰åˆ†å‰²å¼€

## 6. ğŸ¤” é™æ€æˆå‘˜å¯ä»¥æ˜¯æŠ½è±¡çš„å—ï¼Ÿ

ä¸å¯ä»¥ï¼ŒTypeScript ä¸æ”¯æŒæŠ½è±¡é™æ€æˆå‘˜ã€‚

`static` å’Œ `abstract` ä¿®é¥°ç¬¦ä¸èƒ½åŒæ—¶ä½¿ç”¨åœ¨åŒä¸€æˆå‘˜ä¸Šï¼Œå¦‚æœç»„åˆä½¿ç”¨ï¼Œä¼šæŠ¥é”™ï¼

```ts
abstract class BaseClass {
  static abstract typeName: string // âŒ æŠ¥é”™
  // 'static' modifier cannot be used with 'abstract' modifier.(1243)
  static abstract createInstance(): any // âŒ æŠ¥é”™
  // 'static' modifier cannot be used with 'abstract' modifier.(1243)
}
```

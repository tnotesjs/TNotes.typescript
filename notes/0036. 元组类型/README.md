# [0036. å…ƒç»„ç±»å‹](https://github.com/tnotesjs/TNotes.typescript/tree/main/notes/0036.%20%E5%85%83%E7%BB%84%E7%B1%BB%E5%9E%8B)

<!-- region:toc -->

- [1. ğŸ¯ æœ¬èŠ‚å†…å®¹](#1--æœ¬èŠ‚å†…å®¹)
- [2. ğŸ«§ è¯„ä»·](#2--è¯„ä»·)
- [3. ğŸ” å…ƒç»„ç±»å‹ç« èŠ‚é€Ÿè§ˆ](#3--å…ƒç»„ç±»å‹ç« èŠ‚é€Ÿè§ˆ)
- [4. ğŸ¤” ä»€ä¹ˆæ˜¯å…ƒç»„ï¼ˆtupleï¼‰ç±»å‹ï¼Ÿ](#4--ä»€ä¹ˆæ˜¯å…ƒç»„tupleç±»å‹)
- [5. ğŸ¤” å…ƒç»„å’Œæ•°ç»„åœ¨è¯­æ³•ä¸Šæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ](#5--å…ƒç»„å’Œæ•°ç»„åœ¨è¯­æ³•ä¸Šæœ‰ä»€ä¹ˆåŒºåˆ«)
- [6. ğŸ¤” ä¸ºä»€ä¹ˆå…ƒç»„å¿…é¡»æ˜¾å¼å£°æ˜ç±»å‹ï¼Ÿ](#6--ä¸ºä»€ä¹ˆå…ƒç»„å¿…é¡»æ˜¾å¼å£°æ˜ç±»å‹)
- [7. ğŸ¤” å…ƒç»„æ˜¯å¦æ”¯æŒå¯é€‰æˆå‘˜ï¼Ÿ](#7--å…ƒç»„æ˜¯å¦æ”¯æŒå¯é€‰æˆå‘˜)
- [8. ğŸ¤” å…ƒç»„æˆå‘˜æ•°é‡æ˜¯å¦æœ‰é™åˆ¶ï¼Ÿ](#8--å…ƒç»„æˆå‘˜æ•°é‡æ˜¯å¦æœ‰é™åˆ¶)
- [9. ğŸ¤” æ‰©å±•è¿ç®—ç¬¦åœ¨å…ƒç»„ä¸­å¦‚ä½•ä½¿ç”¨ï¼Ÿ](#9--æ‰©å±•è¿ç®—ç¬¦åœ¨å…ƒç»„ä¸­å¦‚ä½•ä½¿ç”¨)
- [10. ğŸ¤” å…ƒç»„æˆå‘˜å¯ä»¥æœ‰åç§°å—ï¼Ÿ](#10--å…ƒç»„æˆå‘˜å¯ä»¥æœ‰åç§°å—)
- [11. ğŸ¤” å¦‚ä½•è¯»å–å…ƒç»„æˆå‘˜çš„ç±»å‹ï¼Ÿ](#11--å¦‚ä½•è¯»å–å…ƒç»„æˆå‘˜çš„ç±»å‹)
- [12. ğŸ¤” å¦‚ä½•åˆ›å»ºåªè¯»å…ƒç»„ï¼Ÿ](#12--å¦‚ä½•åˆ›å»ºåªè¯»å…ƒç»„)
- [13. ğŸ¤” åªè¯»å…ƒç»„å’Œæ™®é€šå…ƒç»„æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ](#13--åªè¯»å…ƒç»„å’Œæ™®é€šå…ƒç»„æœ‰ä»€ä¹ˆå…³ç³»)
- [14. ğŸ¤” TypeScript å¦‚ä½•æ¨æ–­å…ƒç»„çš„æˆå‘˜æ•°é‡ï¼Ÿ](#14--typescript-å¦‚ä½•æ¨æ–­å…ƒç»„çš„æˆå‘˜æ•°é‡)
- [15. ğŸ¤” æ‰©å±•è¿ç®—ç¬¦åœ¨å‡½æ•°è°ƒç”¨ä¸­ä¼šäº§ç”Ÿä»€ä¹ˆé—®é¢˜ï¼Ÿ](#15--æ‰©å±•è¿ç®—ç¬¦åœ¨å‡½æ•°è°ƒç”¨ä¸­ä¼šäº§ç”Ÿä»€ä¹ˆé—®é¢˜)

<!-- endregion:toc -->

## 1. ğŸ¯ æœ¬èŠ‚å†…å®¹

- å…ƒç»„ç±»å‹ï¼ˆtupleï¼‰
- æ‰©å±•è¿ç®—ç¬¦ï¼ˆ`...`ï¼‰
- å…ƒç»„æˆå‘˜å‘½å

## 2. ğŸ«§ è¯„ä»·

- ä½ å¯ä»¥å°†å…ƒç»„ç†è§£ä¸ºæ›´å…·ä½“çš„æ•°ç»„ç±»å‹ã€‚
- å…ƒç»„ç±»å‹åœ¨æ•°ç»„ç±»å‹çš„åŸºç¡€ä¸Šå¯¹æ¯ä¸€ä¸ªæˆå‘˜çš„ç±»å‹ä»¥åŠæ•°ç»„çš„é•¿åº¦è¿›è¡Œäº†çº¦æŸã€‚

## 3. ğŸ” å…ƒç»„ç±»å‹ç« èŠ‚é€Ÿè§ˆ

<N :ids="['0086', '0087', '0088', '0089', '0090']" />

## 4. ğŸ¤” ä»€ä¹ˆæ˜¯å…ƒç»„ï¼ˆtupleï¼‰ç±»å‹ï¼Ÿ

å…ƒç»„ï¼ˆtupleï¼‰æ˜¯ TypeScript ç‰¹æœ‰çš„æ•°æ®ç±»å‹ï¼ŒJavaScript æ²¡æœ‰å•ç‹¬åŒºåˆ†è¿™ç§ç±»å‹ã€‚å®ƒè¡¨ç¤ºæˆå‘˜ç±»å‹å¯ä»¥è‡ªç”±è®¾ç½®çš„æ•°ç»„ï¼Œå³æ•°ç»„çš„å„ä¸ªæˆå‘˜çš„ç±»å‹å¯ä»¥ä¸åŒã€‚

```ts
const s: [string, string, boolean] = ['a', 'b', true]
```

ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œå…ƒç»„ s çš„å‰ä¸¤ä¸ªæˆå‘˜çš„ç±»å‹æ˜¯ stringï¼Œæœ€åä¸€ä¸ªæˆå‘˜çš„ç±»å‹æ˜¯ booleanã€‚

## 5. ğŸ¤” å…ƒç»„å’Œæ•°ç»„åœ¨è¯­æ³•ä¸Šæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

å…ƒç»„ç±»å‹çš„å†™æ³•ä¸æ•°ç»„æœ‰ä¸€ä¸ªé‡å¤§å·®å¼‚ï¼š

- æ•°ç»„çš„æˆå‘˜ç±»å‹å†™åœ¨æ–¹æ‹¬å·å¤–é¢ï¼š`number[]`
- å…ƒç»„çš„æˆå‘˜ç±»å‹å†™åœ¨æ–¹æ‹¬å·é‡Œé¢ï¼š`[number]`

```ts
// æ•°ç»„
let a: number[] = [1]

// å…ƒç»„
let t: [number] = [1]
```

ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œå˜é‡ a å’Œ t çš„å€¼éƒ½æ˜¯`[1]`ï¼Œä½†æ˜¯å®ƒä»¬çš„ç±»å‹æ˜¯ä¸ä¸€æ ·çš„ã€‚ a æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜ç±»å‹ number å†™åœ¨æ–¹æ‹¬å·å¤–é¢ï¼›t æ˜¯ä¸€ä¸ªå…ƒç»„ï¼Œæˆå‘˜ç±»å‹ number å†™åœ¨æ–¹æ‹¬å·é‡Œé¢ã€‚

## 6. ğŸ¤” ä¸ºä»€ä¹ˆå…ƒç»„å¿…é¡»æ˜¾å¼å£°æ˜ç±»å‹ï¼Ÿ

ä½¿ç”¨å…ƒç»„æ—¶ï¼Œå¿…é¡»æ˜ç¡®ç»™å‡ºç±»å‹å£°æ˜ï¼Œä¸èƒ½çœç•¥ï¼Œå¦åˆ™ TypeScript ä¼šæŠŠä¸€ä¸ªå€¼è‡ªåŠ¨æ¨æ–­ä¸ºæ•°ç»„ï¼š

```ts
// a çš„ç±»å‹è¢«æ¨æ–­ä¸º (number | boolean)[]
let a = [1, true]

// æ­£ç¡®çš„å…ƒç»„å£°æ˜
let b: [number, boolean] = [1, true]
```

ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œå˜é‡ a çš„å€¼å…¶å®æ˜¯ä¸€ä¸ªå…ƒç»„ï¼Œä½†æ˜¯ TypeScript ä¼šå°†å…¶æ¨æ–­ä¸ºä¸€ä¸ªè”åˆç±»å‹çš„æ•°ç»„ï¼Œå³ a çš„ç±»å‹ä¸º `(number | boolean)[]`ã€‚æ‰€ä»¥ï¼Œå…ƒç»„å¿…é¡»æ˜¾å¼ç»™å‡ºç±»å‹å£°æ˜ã€‚

---

ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ `as const` æ–­è¨€æ¥è®© TS å°†æ˜¾å¼å£°æ˜çš„æ•°ç»„æ¨æ–­ä¸ºæ›´åŠ å…·ä½“çš„åªè¯»å…ƒç»„ç±»å‹ã€‚

```ts
// a çš„ç±»å‹è¢«æ¨æ–­ä¸º (number | boolean)[]
let a = [1, true]

// b çš„ç±»å‹è¢«æ¨æ–­ä¸º readonly [1, true]
let b = [1, true] as const
```

æˆ–è®¸ä½ æƒ³è¦çš„æ˜¯ `[number, boolean]` å…ƒç»„ç±»å‹ï¼Œè€Œéè¿™ä¸ª `readonly [1, true]` åªè¯»å…ƒç»„ç±»å‹ã€‚

::: tip ğŸ’¡ å»ºè®®

å½“ä½ åœ¨å£°æ˜ä¸€ä¸ªå…ƒç»„ç±»å‹æ—¶ï¼Œæœ€å¥½åŠ ä¸Šæ˜¾ç¤ºå£°æ˜ï¼Œä¸è¦äº¤ç”± TS æ¨æ–­ã€‚

:::

## 7. ğŸ¤” å…ƒç»„æ˜¯å¦æ”¯æŒå¯é€‰æˆå‘˜ï¼Ÿ

æ˜¯çš„ï¼Œå…ƒç»„æˆå‘˜çš„ç±»å‹å¯ä»¥æ·»åŠ é—®å·åç¼€ï¼ˆ`?`ï¼‰ï¼Œè¡¨ç¤ºè¯¥æˆå‘˜æ˜¯å¯é€‰çš„ã€‚ä½†é—®å·åªèƒ½ç”¨äºå…ƒç»„çš„å°¾éƒ¨æˆå‘˜ï¼Œæ‰€æœ‰å¯é€‰æˆå‘˜å¿…é¡»åœ¨å¿…é€‰æˆå‘˜ä¹‹åï¼š

```ts
let a: [number, number?] = [1]
// å¯ä»¥æ˜¯ [1] æˆ– [1, 2]

type myTuple = [number, number, number?, string?]
// å¯ä»¥æœ‰ 2ã€3 æˆ– 4 ä¸ªæˆå‘˜
```

## 8. ğŸ¤” å…ƒç»„æˆå‘˜æ•°é‡æ˜¯å¦æœ‰é™åˆ¶ï¼Ÿ

å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå…ƒç»„çš„æˆå‘˜æ•°é‡æ˜¯æœ‰é™çš„ï¼Œä»ç±»å‹å£°æ˜å°±å¯ä»¥æ˜ç¡®çŸ¥é“å…ƒç»„åŒ…å«å¤šå°‘ä¸ªæˆå‘˜ï¼Œè¶Šç•Œçš„æˆå‘˜ä¼šæŠ¥é”™ï¼š

```ts
let x: [string, string] = ['a', 'b']

x[2] = 'c' // æŠ¥é”™ï¼šè¶…å‡ºå…ƒç»„å£°æ˜çš„ç´¢å¼•èŒƒå›´
```

ä½†å¯ä»¥ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ï¼ˆ`...`ï¼‰è¡¨ç¤ºä¸é™æˆå‘˜æ•°é‡çš„å…ƒç»„ï¼š

```ts
type NamedNums = [string, ...number[]]

const a: NamedNums = ['A', 1, 2]
const b: NamedNums = ['B', 1, 2, 3, 4, 5]
```

## 9. ğŸ¤” æ‰©å±•è¿ç®—ç¬¦åœ¨å…ƒç»„ä¸­å¦‚ä½•ä½¿ç”¨ï¼Ÿ

æ‰©å±•è¿ç®—ç¬¦ï¼ˆ`...`ï¼‰ç”¨åœ¨å…ƒç»„çš„ä»»æ„ä½ç½®éƒ½å¯ä»¥ï¼Œå®ƒçš„åé¢åªèƒ½æ˜¯ä¸€ä¸ªæ•°ç»„æˆ–å…ƒç»„ï¼š

```ts
type t1 = [string, number, ...boolean[]] // æ‰©å±•åœ¨å°¾éƒ¨
type t2 = [string, ...boolean[], number] // æ‰©å±•åœ¨ä¸­éƒ¨
type t3 = [...boolean[], string, number] // æ‰©å±•åœ¨å¤´éƒ¨

// ä½¿ç”¨ç¤ºä¾‹
const example1: t1 = ['hello', 42, true, false, true]
const example2: t2 = ['hello', true, false, 42]
const example3: t3 = [true, false, 'hello', 42]
```

## 10. ğŸ¤” å…ƒç»„æˆå‘˜å¯ä»¥æœ‰åç§°å—ï¼Ÿ

å…ƒç»„çš„æˆå‘˜å¯ä»¥æ·»åŠ æˆå‘˜åï¼Œè¿™ä¸ªæˆå‘˜åæ˜¯è¯´æ˜æ€§çš„ï¼Œå¯ä»¥ä»»æ„å–åï¼Œæ²¡æœ‰å®é™…ä½œç”¨ï¼š

```ts
type Color = [red: number, green: number, blue: number]

const c: Color = [255, 255, 255]

// æˆå‘˜åç§°ä»…ç”¨äºè¯´æ˜ï¼Œæ²¡æœ‰å®é™…ä½œç”¨
// ä»ç„¶é€šè¿‡ç´¢å¼•è®¿é—®
console.log(c[0]) // 255
```

## 11. ğŸ¤” å¦‚ä½•è¯»å–å…ƒç»„æˆå‘˜çš„ç±»å‹ï¼Ÿ

å…ƒç»„å¯ä»¥é€šè¿‡æ–¹æ‹¬å·è¯»å–æˆå‘˜ç±»å‹ï¼š

```ts
type Tuple = [string, number]
type Age = Tuple[1] // number

// é€šè¿‡ number ç±»å‹è¯»å–æ‰€æœ‰æˆå‘˜çš„è”åˆç±»å‹
type Tuple2 = [string, number, Date]
type TupleEl = Tuple2[number] // string|number|Date
```

## 12. ğŸ¤” å¦‚ä½•åˆ›å»ºåªè¯»å…ƒç»„ï¼Ÿ

å…ƒç»„ä¹Ÿå¯ä»¥æ˜¯åªè¯»çš„ï¼Œä¸å…è®¸ä¿®æ”¹ï¼Œæœ‰å¤šç§å†™æ³•ï¼š

```ts
// å†™æ³•ä¸€ï¼ˆç±»å‹åªè¯»å…ƒç»„ï¼‰
type t1 = readonly [number, string]

// å†™æ³•äºŒï¼ˆç±»å‹åªè¯»å…ƒç»„ï¼‰
type t2 = Readonly<[number, string]>

// å†™æ³•ä¸‰ï¼ˆå­—é¢é‡åªè¯»å…ƒç»„ï¼‰
const readonlyTuple_2 = ['hello', 42] as const
// TS æ¨æ–­ç»“æœï¼š
// readonly ["hello", 42]

// ä½¿ç”¨ç¤ºä¾‹
const readonlyTuple: readonly [string, number] = ['hello', 42]
// readonlyTuple[0] = 'world'; // âŒ æŠ¥é”™ï¼šæ— æ³•åˆ†é…åˆ° "0" ï¼Œå› ä¸ºå®ƒæ˜¯åªè¯»å±æ€§
// Cannot assign to '0' because it is a read-only property.(2540)
```

## 13. ğŸ¤” åªè¯»å…ƒç»„å’Œæ™®é€šå…ƒç»„æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ

åªè¯»å…ƒç»„æ˜¯å…ƒç»„çš„çˆ¶ç±»å‹ï¼Œæ‰€ä»¥å…ƒç»„å¯ä»¥æ›¿ä»£åªè¯»å…ƒç»„ï¼Œè€Œåªè¯»å…ƒç»„ä¸èƒ½æ›¿ä»£å…ƒç»„ï¼š

```ts
type ReadonlyTuple = readonly [number, number]
type MutableTuple = [number, number]

let mutable: MutableTuple = [1, 2]
let readonly: ReadonlyTuple = mutable // æ­£ç¡®ï¼šå­ç±»å‹èµ‹å€¼ç»™çˆ¶ç±»å‹

// readonly = mutable; // âœ… æ­£ç¡®ï¼šåŒä¸€å¯¹è±¡
// mutable = readonly; // âŒ æŠ¥é”™ï¼šçˆ¶ç±»å‹ä¸èƒ½èµ‹å€¼ç»™å­ç±»å‹
```

ç”±äºåªè¯»å…ƒç»„ä¸èƒ½æ›¿ä»£å…ƒç»„ï¼Œæ‰€ä»¥ä¼šäº§ç”Ÿä¸€äº›ä»¤äººå›°æƒ‘çš„æŠ¥é”™ï¼š

```ts
function distanceFromOrigin([x, y]: [number, number]) {
  return Math.sqrt(x ** 2 + y ** 2)
}

let point = [3, 4] as const // ç±»å‹ä¸º readonly [3, 4]

// distanceFromOrigin(point); // âŒ æŠ¥é”™ï¼šreadonly [3, 4] ä¸èƒ½èµ‹å€¼ç»™ [number, number]

// è§£å†³æ–¹æ³•ï¼šä½¿ç”¨ç±»å‹æ–­è¨€
distanceFromOrigin(point as [number, number])
```

## 14. ğŸ¤” TypeScript å¦‚ä½•æ¨æ–­å…ƒç»„çš„æˆå‘˜æ•°é‡ï¼Ÿ

TypeScript æ ¹æ®å…ƒç»„å®šä¹‰æ¨æ–­æˆå‘˜æ•°é‡ï¼š

```ts
// æ²¡æœ‰å¯é€‰æˆå‘˜å’Œæ‰©å±•è¿ç®—ç¬¦æ—¶ï¼ŒTypeScript ä¼šæ¨æ–­å‡ºç¡®åˆ‡çš„æˆå‘˜æ•°é‡
function f1(point: [number, number]) {
  point.length
  // point.length è¢«æ¨æ–­ä¸º 2
  // if (point.length === 3) { } // âŒ æŠ¥é”™ï¼šæ¡ä»¶æ°¸è¿œä¸º false
}

// åŒ…å«å¯é€‰æˆå‘˜æ—¶ï¼ŒTypeScript ä¼šæ¨æ–­å‡ºå¯èƒ½çš„æˆå‘˜æ•°é‡èŒƒå›´
function f2(point: [number, number?, number?]) {
  point.length
  // point.length è¢«æ¨æ–­ä¸º 1|2|3
  // if (point.length === 4) { } // âŒ æŠ¥é”™ï¼šæ¡ä»¶æ°¸è¿œä¸º false
}

// ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦æ—¶ï¼ŒTypeScript æ— æ³•æ¨æ–­ç¡®åˆ‡çš„æˆå‘˜æ•°é‡
const myTuple: [...string[]] = ['a', 'b', 'c']
// myTuple.length è¢«æ¨æ–­ä¸º number
if (myTuple.length === 4) {
} // âœ… æ­£ç¡®ï¼šæ¡ä»¶å¯èƒ½ä¸º true
```

## 15. ğŸ¤” æ‰©å±•è¿ç®—ç¬¦åœ¨å‡½æ•°è°ƒç”¨ä¸­ä¼šäº§ç”Ÿä»€ä¹ˆé—®é¢˜ï¼Ÿ

æ‰©å±•è¿ç®—ç¬¦å°†æ•°ç»„è½¬æ¢æˆå‚æ•°åºåˆ—æ—¶ï¼ŒTypeScript ä¼šè®¤ä¸ºå‚æ•°æ•°é‡æ˜¯ä¸ç¡®å®šçš„ï¼Œå¯èƒ½å¯¼è‡´ä¸å‡½æ•°æœŸæœ›å‚æ•°æ•°é‡ä¸åŒ¹é…çš„æŠ¥é”™ï¼š

```ts
const arr = [1, 2]

function add(x: number, y: number) {
  return x + y
}

// add(...arr) // âŒ æŠ¥é”™ï¼šTypeScript è®¤ä¸º arr å¯èƒ½åŒ…å«ä»»æ„æ•°é‡çš„å…ƒç´ 
// A spread argument must either have a tuple type or be passed to a rest parameter.(2556)

// è§£å†³æ–¹æ³•ä¸€ï¼šå£°æ˜ä¸ºç¡®å®šé•¿åº¦çš„å…ƒç»„
const arr2: [number, number] = [1, 2]
add(...arr2) // âœ… æ­£ç¡®

// è§£å†³æ–¹æ³•äºŒï¼šä½¿ç”¨ as const æ–­è¨€
const arr3 = [1, 2] as const
add(...arr3) // âœ… æ­£ç¡®ï¼Œç±»å‹ä¸º readonly [1, 2]
```

æœ‰äº›å‡½æ•°å¯ä»¥æ¥å—ä»»æ„æ•°é‡çš„å‚æ•°ï¼Œè¿™æ—¶ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦å°±ä¸ä¼šæŠ¥é”™ï¼š

```ts
const arr = [1, 2, 3]

// console.log å¯ä»¥æ¥å—ä»»æ„æ•°é‡çš„å‚æ•°
console.log(...arr) // âœ… æ­£ç¡®

// Math.max å¯ä»¥æ¥å—ä»»æ„æ•°é‡çš„å‚æ•°
const max = Math.max(...arr) // âœ… æ­£ç¡®

// æ•°ç»„çš„ push æ–¹æ³•å¯ä»¥æ¥å—ä»»æ„æ•°é‡çš„å‚æ•°
const target: number[] = []
target.push(...arr) // âœ… æ­£ç¡®
```

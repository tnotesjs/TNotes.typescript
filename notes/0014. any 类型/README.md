# [0014. any ç±»å‹](https://github.com/tnotesjs/TNotes.typescript/tree/main/notes/0014.%20any%20%E7%B1%BB%E5%9E%8B)

<!-- region:toc -->

- [1. ğŸ¯ æœ¬èŠ‚å†…å®¹](#1--æœ¬èŠ‚å†…å®¹)
- [2. ğŸ«§ è¯„ä»·](#2--è¯„ä»·)
- [3. ğŸ¤” any ç±»å‹æ˜¯ä»€ä¹ˆï¼Ÿ](#3--any-ç±»å‹æ˜¯ä»€ä¹ˆ)
- [4. ğŸ¤” TS ä¼šå…³é—­å¯¹ any çš„ç±»å‹æ£€æŸ¥å—ï¼Ÿ](#4--ts-ä¼šå…³é—­å¯¹-any-çš„ç±»å‹æ£€æŸ¥å—)
- [5. ğŸ¤” å®é™…å¼€å‘ä¸­ï¼Œé€šå¸¸ä¼šåœ¨ä»€ä¹ˆåœºæ™¯ä¸‹ä¸»åŠ¨ä½¿ç”¨ any ç±»å‹å‘¢ï¼Ÿ](#5--å®é™…å¼€å‘ä¸­é€šå¸¸ä¼šåœ¨ä»€ä¹ˆåœºæ™¯ä¸‹ä¸»åŠ¨ä½¿ç”¨-any-ç±»å‹å‘¢)
- [6. ğŸ¤” "any assignability"æ˜¯ä»€ä¹ˆï¼Ÿ](#6--any-assignabilityæ˜¯ä»€ä¹ˆ)
- [7. ğŸ¤” TS ä¼šå…³é—­å¯¹ any ç±»å‹çš„æ£€æŸ¥ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆå°† any ç±»å‹çš„å€¼èµ‹å€¼ç»™ never ç±»å‹è¿˜æ˜¯ä¼šè§¦å‘æŠ¥é”™å‘¢ï¼Ÿ](#7--ts-ä¼šå…³é—­å¯¹-any-ç±»å‹çš„æ£€æŸ¥ä½†æ˜¯ä¸ºä»€ä¹ˆå°†-any-ç±»å‹çš„å€¼èµ‹å€¼ç»™-never-ç±»å‹è¿˜æ˜¯ä¼šè§¦å‘æŠ¥é”™å‘¢)
- [8. ğŸ¤” å¦‚ä½•åœ¨ IDE ä¸­è¯†åˆ«å“ªäº›ç±»å‹è¢« TS éšå¼åœ°æ¨æ–­ä¸ºäº† any ç±»å‹å‘¢ï¼Ÿ](#8--å¦‚ä½•åœ¨-ide-ä¸­è¯†åˆ«å“ªäº›ç±»å‹è¢«-ts-éšå¼åœ°æ¨æ–­ä¸ºäº†-any-ç±»å‹å‘¢)
- [9. ğŸ¤” TS å¯¹ any çš„ç±»å‹æ¨æ–­æ˜¯å¦‚ä½•å¤„ç†çš„ï¼Ÿ](#9--ts-å¯¹-any-çš„ç±»å‹æ¨æ–­æ˜¯å¦‚ä½•å¤„ç†çš„)
- [10. ğŸ¤” å…³äº any ç±»å‹çš„ä¸€äº›å¼€å‘å»ºè®®éƒ½æœ‰å“ªäº›ï¼Ÿ](#10--å…³äº-any-ç±»å‹çš„ä¸€äº›å¼€å‘å»ºè®®éƒ½æœ‰å“ªäº›)
- [11. ğŸ¤” noImplicitAny é…ç½®çš„ä½œç”¨æ˜¯ï¼Ÿ](#11--noimplicitany-é…ç½®çš„ä½œç”¨æ˜¯)
- [12. ğŸ¤” any ç±»å‹çš„æ±¡æŸ“é—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿ](#12--any-ç±»å‹çš„æ±¡æŸ“é—®é¢˜æ˜¯ä»€ä¹ˆ)
- [13. ğŸ¤” ç©ºæ•°ç»„ä¼šè¢« TS æ¨æ–­ä¸ºä»€ä¹ˆç±»å‹ï¼Ÿ](#13--ç©ºæ•°ç»„ä¼šè¢«-ts-æ¨æ–­ä¸ºä»€ä¹ˆç±»å‹)
- [14. ğŸ”— å¼•ç”¨](#14--å¼•ç”¨)

<!-- endregion:toc -->

## 1. ğŸ¯ æœ¬èŠ‚å†…å®¹

- any ç±»å‹
- any assignability
- any ç±»å‹æ±¡æŸ“é—®é¢˜
- noImplicitAny é…ç½®
- ç©ºæ•°ç»„çš„ç±»å‹æ¨æ–­

## 2. ğŸ«§ è¯„ä»·

any ç±»å‹è¢«å¾ˆå¤šæ•™ç¨‹è§†ä½œå…œåº•ç±»å‹ï¼Œå‘Šè¯‰ä¸æƒ³å¤„ç†ç±»å‹é”™è¯¯ï¼Œå°± any ä¸€ä¸‹ï¼Œä½†æ˜¯è¿™ä¹ˆåšä¼šå¯¼è‡´å¾ˆå¤šé—®é¢˜ã€‚

å¦‚æœé‡åˆ°ç±»å‹é—®é¢˜å°± any ä¸€ä¸‹ï¼Œé‚£å­¦ä¹  TS ä¹Ÿå°±æ²¡å•¥å¿…è¦äº†ï¼Œå»ºè®®æœ€å¥½è¿˜æ˜¯å°‘ç”¨ anyã€‚

## 3. ğŸ¤” any ç±»å‹æ˜¯ä»€ä¹ˆï¼Ÿ

- `any` ç±»å‹æ˜¯ TypeScript ä¸­çš„ä¸€ç§ç‰¹æ®Šç±»å‹ï¼Œè¡¨ç¤ºæ²¡æœ‰ä»»ä½•ç±»å‹é™åˆ¶
- `any` ç±»å‹çš„å˜é‡å¯ä»¥è¢«èµ‹äºˆä»»æ„ç±»å‹çš„å€¼ï¼Œä¹Ÿå¯ä»¥è¢«èµ‹å€¼ç»™ä»»ä½•å…¶ä»–ç±»å‹çš„å˜é‡ï¼ˆé™¤äº† `never` ç±»å‹ï¼‰
- ä»é›†åˆè®ºçš„è§’åº¦çœ‹ï¼Œ`any` ç±»å‹å¯ä»¥çœ‹ä½œæ˜¯æ‰€æœ‰å…¶ä»–ç±»å‹çš„å…¨é›†ï¼ŒåŒ…å«äº†æ‰€æœ‰å¯èƒ½çš„ç±»å‹
- TypeScript å°† `any` ç±»å‹ç§°ä¸º"é¡¶å±‚ç±»å‹"ï¼Œæ„å‘³ç€å®ƒæ¶µç›–äº†æ‰€æœ‰ä¸‹å±‚ç±»å‹
- ä½¿ç”¨ `any` ç±»å‹è™½ç„¶å¯ä»¥é¿å…ç±»å‹æ£€æŸ¥é”™è¯¯ï¼Œä½†ä¼šå¤±å» TypeScript æä¾›çš„ç±»å‹å®‰å…¨ä¿éšœ
- åº”è¯¥å°½é‡é¿å…ä½¿ç”¨ `any` ç±»å‹ï¼Œå¦åˆ™å°±å¤±å»äº†ä½¿ç”¨ TypeScript çš„æ„ä¹‰

## 4. ğŸ¤” TS ä¼šå…³é—­å¯¹ any çš„ç±»å‹æ£€æŸ¥å—ï¼Ÿ

- å˜é‡ç±»å‹ä¸€æ—¦è®¾ä¸º anyï¼ŒTypeScript å®é™…ä¸Šä¼šå…³é—­è¿™ä¸ªå˜é‡çš„ç±»å‹æ£€æŸ¥ã€‚å³ä½¿æœ‰æ˜æ˜¾çš„ç±»å‹é”™è¯¯ï¼Œåªè¦å¥æ³•æ­£ç¡®ï¼Œéƒ½ä¸ä¼šæŠ¥é”™ã€‚åº”è¯¥å°½é‡é¿å…ä½¿ç”¨ any ç±»å‹ï¼Œå¦åˆ™å°±å¤±å»äº†ä½¿ç”¨ TypeScript çš„æ„ä¹‰ã€‚
- TypeScript è®¤ä¸ºï¼Œåªè¦å¼€å‘è€…ä½¿ç”¨äº† any ç±»å‹ï¼Œå°±è¡¨ç¤ºå¼€å‘è€…æƒ³è¦è‡ªå·±æ¥å¤„ç†è¿™äº›ä»£ç ï¼Œæ‰€ä»¥å°±ä¸å¯¹ any ç±»å‹è¿›è¡Œä»»ä½•é™åˆ¶ï¼Œæ€ä¹ˆä½¿ç”¨éƒ½å¯ä»¥ã€‚
- ä¸è¦å…»æˆä¸€æ—¦é‡åˆ°ç±»å‹æŠ¥é”™å°± any ä¸€ä¸‹ï¼ˆè¿‡äºæš´åŠ›ï¼‰ï¼Œå¯ä»¥ç£ä¿ƒè‡ªå·±å¤šå­¦ä¹ ä¸‹ TypeScript çš„ç±»å‹ç³»ç»Ÿï¼Œåè¾¹å„¿ä¼šæœ‰æ›´ nice çš„è§£å†³æ–¹æ¡ˆï¼

```ts
let x: any = 'hello'

x(1) // ä¸æŠ¥é”™
x.foo = 100 // ä¸æŠ¥é”™
```

ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œå˜é‡ x çš„å€¼æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä½†æ˜¯æŠŠå®ƒå½“ä½œå‡½æ•°è°ƒç”¨ï¼Œæˆ–è€…å½“ä½œå¯¹è±¡è¯»å–ä»»æ„å±æ€§ï¼ŒTypeScript ç¼–è¯‘æ—¶éƒ½ä¸æŠ¥é”™ã€‚åŸå› å°±æ˜¯ x çš„ç±»å‹æ˜¯ anyï¼ŒTypeScript ä¸å¯¹å…¶è¿›è¡Œç±»å‹æ£€æŸ¥ã€‚

## 5. ğŸ¤” å®é™…å¼€å‘ä¸­ï¼Œé€šå¸¸ä¼šåœ¨ä»€ä¹ˆåœºæ™¯ä¸‹ä¸»åŠ¨ä½¿ç”¨ any ç±»å‹å‘¢ï¼Ÿ

å®é™…å¼€å‘ä¸­ï¼Œany ç±»å‹ä¸»è¦é€‚ç”¨ä»¥ä¸‹ä¸¤ä¸ªåœºåˆï¼š

- åœºæ™¯ 1ï¼šå‡ºäºç‰¹æ®ŠåŸå› ï¼Œéœ€è¦å…³é—­æŸäº›å˜é‡çš„ç±»å‹æ£€æŸ¥ï¼Œå°±å¯ä»¥æŠŠè¯¥å˜é‡çš„ç±»å‹è®¾ä¸º anyã€‚æ¯”å¦‚"å‰©ä½™å‚æ•°"ï¼Œ`console.log()` å¯ä»¥ä¼ å…¥ä»»æ„æ•°é‡å’Œç±»å‹çš„å‚æ•°ï¼Œæ­¤æ—¶å°±éœ€è¦ç”¨åˆ° any ç±»å‹ã€‚

```ts
interface Console {
  log(...data: any[]): void
}
```

- åœºæ™¯ 2ï¼šä¸ºäº†é€‚é…ä»¥å‰è€çš„ JavaScript é¡¹ç›®ï¼Œè®©ä»£ç å¿«é€Ÿè¿ç§»åˆ° TypeScriptï¼Œå¯ä»¥æŠŠå˜é‡ç±»å‹è®¾ä¸º anyã€‚æœ‰äº›å¹´ä»£å¾ˆä¹…çš„å¤§å‹ JavaScript é¡¹ç›®ï¼Œå°¤å…¶æ˜¯åˆ«äººçš„ä»£ç ï¼Œå¾ˆéš¾ä¸ºæ¯ä¸€è¡Œé€‚é…æ­£ç¡®çš„ç±»å‹ï¼Œè¿™æ—¶ä½ ä¸ºé‚£äº›ç±»å‹å¤æ‚çš„å˜é‡åŠ ä¸Š anyï¼ŒTypeScript ç¼–è¯‘æ—¶å°±ä¸ä¼šæŠ¥é”™ã€‚

å¯¹æ¯”åˆ†æï¼š

- åœºæ™¯ 1ï¼šæƒ…æœ‰å¯åŸï¼Œè¿™æ—¶å€™ä½¿ç”¨ any ç±»å‹æ˜¯æ¯”è¾ƒåˆé€‚çš„ã€‚
- åœºæ™¯ 2ï¼šä¸æ¨èï¼Œå¦‚æœæ˜¯è¿ç§» `*.js` åˆ° `*.ts` çš„é¡¹ç›®ï¼Œè¿˜æœ‰æœ‰æ›´å¥½çš„æ–¹æ¡ˆæ¥è§£å†³è¿ç§»åˆæœŸå› ç±»å‹æ£€æŸ¥è€Œå‡ºç°å¤§é‡æŠ¥é”™çš„é—®é¢˜ã€‚

## 6. ğŸ¤” "any assignability"æ˜¯ä»€ä¹ˆï¼Ÿ

any assignability è¡¨ç¤º any ç±»å‹çš„å¯èµ‹å€¼æ€§ã€‚

- ğŸ¤” å¯èµ‹å€¼æ€§æ˜¯ä»€ä¹ˆï¼Ÿ
- ç­”ï¼šç®€å•æ¥è®²å°±æ˜¯ -> è¯¥ç±»å‹å¯ä»¥è¢«ä»€ä¹ˆç±»å‹èµ‹å€¼ï¼Œå¯ä»¥èµ‹å€¼ç»™ä»€ä¹ˆç±»å‹ã€‚

è¿™é‡Œåˆ»æ„ç”¨è‹±æ–‡æ¥è¡¨è¿°ï¼Œç›®çš„æ˜¯ä¸ºäº†è·Ÿå®˜æ–¹æ–‡æ¡£ä¿æŒåŒæ­¥ï¼Œå¦‚æœä½ åœ¨ TypeScript å®˜ç½‘ä¸­ï¼Œæƒ³è¦æŸ¥è¯¢æŸäº›ç±»å‹çš„å¯èµ‹å€¼æ€§ï¼Œå°±å¯ä»¥ç›´æ¥æœ assignability å…³é”®å­—ã€‚

![å›¾ 2](https://cdn.jsdelivr.net/gh/tnotesjs/imgs@main/2025-10-19-08-46-43.png)

any ç±»å‹è¡¨ç¤ºæ²¡æœ‰ä»»ä½•é™åˆ¶ï¼Œè¯¥ç±»å‹çš„å˜é‡å¯ä»¥è¢«èµ‹äºˆä»»æ„ç±»å‹çš„å€¼ã€‚ä»é›†åˆè®ºçš„è§’åº¦çœ‹ï¼Œany ç±»å‹å¯ä»¥çœ‹æˆæ˜¯æ‰€æœ‰å…¶ä»–ç±»å‹çš„å…¨é›†ï¼ŒåŒ…å«äº†ä¸€åˆ‡å¯èƒ½çš„ç±»å‹ã€‚TypeScript å°†è¿™ç§ç±»å‹ç§°ä¸º"é¡¶å±‚ç±»å‹"ï¼Œæ„ä¸ºæ¶µç›–äº†æ‰€æœ‰ä¸‹å±‚ã€‚

```ts
let x: any

x = 1 // âœ…
x = 'foo' // âœ…
x = true // âœ…
```

ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œå˜é‡ x çš„ç±»å‹æ˜¯ anyï¼Œå°±å¯ä»¥è¢«èµ‹å€¼ä¸ºä»»æ„ç±»å‹çš„å€¼ã€‚

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬åœ¨è¡¨è¿°æ—¶é€šå¸¸ä¼šè¯´ any æ˜¯ä»»æ„ç±»å‹ï¼Œå¯ä»¥èµ‹å€¼ç»™å…¶ä»–ä»»ä½•ç±»å‹ã€‚ä½†æ˜¯ï¼Œè¿™ä¹ˆæè¿°å…¶å®æ˜¯é”™è¯¯çš„ï¼Œany ç±»å‹æ— æ³•èµ‹å€¼ç»™ never ç±»å‹ã€‚

```ts
const a: any = 1
const x: never = a // âŒ
// Type 'any' is not assignable to type 'never'.ts(2322)
```

![å›¾ 1](https://cdn.jsdelivr.net/gh/tnotesjs/imgs@main/2025-10-19-08-24-14.png)

::: warning æ³¨æ„

- ç½‘ä¸Šå¾ˆå¤šæ–‡ç« å¯¹ any ç±»å‹çš„ä»‹ç»ï¼Œä¼šç›´æ¥è¯´ any ç±»å‹å¯ä»¥èµ‹å€¼ç»™å…¶ä»–ä»»ä½•ç±»å‹ï¼Œå¹¶ä¸”ä»»æ„ç±»å‹ä¹Ÿå¯ä»¥èµ‹å€¼ç»™ any ç±»å‹ã€‚
- ä¸Šé¢è¿™æ ·çš„è¯´æ³•ï¼Œå…¶å®æ˜¯ä¸å®Œå…¨æ­£ç¡®çš„ã€‚
- âŒ å‰åŠå¥ï¼šany ç±»å‹å¯ä»¥èµ‹å€¼ç»™ä»»ä½•ç±»å‹ã€‚ -> è¿™å¥è¯æ˜¯é”™çš„
- âœ… ååŠå¥ï¼šä»»ä½•ç±»å‹éƒ½å¯ä»¥èµ‹å€¼ç»™ any ç±»å‹ã€‚ -> è¿™å¥è¯æ˜¯å¯¹çš„

:::

## 7. ğŸ¤” TS ä¼šå…³é—­å¯¹ any ç±»å‹çš„æ£€æŸ¥ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆå°† any ç±»å‹çš„å€¼èµ‹å€¼ç»™ never ç±»å‹è¿˜æ˜¯ä¼šè§¦å‘æŠ¥é”™å‘¢ï¼Ÿ

- åœ¨é strict æ¨¡å¼ä¸‹ï¼ŒTS ä¼šå…³é—­å¯¹ any çš„ç±»å‹æ£€æŸ¥ï¼Œæ˜¯æŒ‡ä½ å¯ä»¥æŠŠ any ç±»å‹è§†ä½œä»»æ„ç±»å‹æ¥ä½¿ç”¨ï¼Œæ¯”å¦‚å°† any ç±»å‹å½“åšå‡½æ•° `a()` æˆ–æ˜¯å½“åšå¯¹è±¡ `a.xxx` ä½¿ç”¨ï¼Œéƒ½ä¸ä¼šè§¦å‘æŠ¥é”™ã€‚
- ä½†ä»»ä½•ç±»å‹ï¼ˆåŒ…æ‹¬ anyï¼‰éƒ½ä¸èƒ½èµ‹å€¼ç»™ neverã€‚
- never æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ç±»å‹ï¼Œå®ƒä»£è¡¨"æ°¸è¿œä¸ä¼šå‡ºç°çš„å€¼"ï¼ˆå³å€¼çš„ç©ºé›†ï¼‰ã€‚è™½ç„¶å®ƒæ˜¯ä¸€ä¸ªåˆæ³•çš„ç±»å‹ï¼Œä½†æ²¡æœ‰ä»»ä½•å®é™…çš„å€¼å¯ä»¥å±äº never ç±»å‹ï¼ˆé™¤äº†ç±»å‹ç³»ç»Ÿå†…éƒ¨çš„ never æœ¬èº«ï¼‰ã€‚

## 8. ğŸ¤” å¦‚ä½•åœ¨ IDE ä¸­è¯†åˆ«å“ªäº›ç±»å‹è¢« TS éšå¼åœ°æ¨æ–­ä¸ºäº† any ç±»å‹å‘¢ï¼Ÿ

åœ¨ä¸€äº› IDE ä¸­ï¼ˆæ¯”å¦‚åœ¨çº¿çš„ TS Playgroundï¼‰ï¼Œèƒ½å¤Ÿç›´è§‚åœ°çœ‹åˆ°é‚£äº›è¢«æ¨æ–­ä¸º any ç±»å‹çš„æˆå‘˜ï¼Œå¦‚æœå˜é‡è¢«éšå¼åœ°æ¨æ–­ä¸º any ç±»å‹ï¼Œåº•éƒ¨ä¼šæœ‰ 3 ä¸ªç‚¹ã€‚

![å›¾ 0](https://cdn.jsdelivr.net/gh/tnotesjs/imgs@main/2025-10-19-08-23-59.png)

```ts
// æµ‹è¯•ç¨‹åºï¼š
function add(x, y) {
  return x + y
}

add(1, [1, 2, 3])
```

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½ å¼€å¯äº† noImplicitAny é…ç½®ï¼Œé‚£ä¹ˆåœ¨ TS æ¨æ–­å‡º any ç±»å‹æ—¶å°±ä¼šæŠ¥é”™ã€‚é‚£å°±æ˜¯ç›´æ¥çˆ†çº¢æé†’äº†ï¼Œè€Œä¸æ˜¯åƒä¸Šé¢è¿™æ ·æ ‡æ³¨ 3 ä¸ªç‚¹æ¥æç¤ºä½ ã€‚

## 9. ğŸ¤” TS å¯¹ any çš„ç±»å‹æ¨æ–­æ˜¯å¦‚ä½•å¤„ç†çš„ï¼Ÿ

å¯¹äºå¼€å‘è€…æ²¡æœ‰æŒ‡å®šç±»å‹ã€TypeScript å¿…é¡»è‡ªå·±æ¨æ–­ç±»å‹çš„é‚£äº›å˜é‡ï¼Œå¦‚æœæ— æ³•æ¨æ–­å‡ºç±»å‹ï¼ŒTypeScript å°±ä¼šè®¤ä¸ºè¯¥å˜é‡çš„ç±»å‹æ˜¯ anyã€‚

éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒTS çš„å…·ä½“æ¨æ–­è¡Œä¸ºä¼šå—åˆ° TS é…ç½®æ–‡ä»¶çš„å½±å“ï¼Œå¦‚æœå¼€å¯äº† noImplicitAny é…ç½®ï¼Œé‚£ä¹ˆåœ¨ TS æ¨æ–­å‡º any ç±»å‹æ—¶å°±ä¼šæŠ¥é”™ã€‚

```ts
function add(x, y) {
  return x + y
}

add(1, [1, 2, 3]) // âœ…
```

TS ç±»å‹æ¨æ–­çš„ç»“æœå¦‚ä¸‹ï¼š

```ts
function add(x: any, y: any): any
```

ä¸Šè¿°ç¨‹åºä¸ä¼šæŠ¥é”™ã€‚å‡½æ•° add() çš„å‚æ•°å˜é‡ x å’Œ yï¼Œéƒ½æ²¡æœ‰è¶³å¤Ÿçš„ä¿¡æ¯ï¼ŒTypeScript æ— æ³•æ¨æ–­å‡ºå®ƒä»¬çš„ç±»å‹ï¼Œå°±ä¼šè®¤ä¸ºè¿™ä¸¤ä¸ªå˜é‡å’Œå‡½æ•°è¿”å›å€¼çš„ç±»å‹éƒ½æ˜¯ anyã€‚åé¢ TS å°±ä¸å†å¯¹å‡½æ•° add() è¿›è¡Œç±»å‹æ£€æŸ¥äº†ã€‚

```ts
// xxx.ts
// ç»™ add å‡½æ•°çš„ä¸¤ä¸ªå‚æ•° xã€y åŠ ä¸Šç±»å‹æ³¨è§£
function add(x: number, y: number) {
  return x + y
}

add(1, [1, 2, 3]) // âŒ
// æŠ¥é”™ï¼šArgument of type 'number[]' is not assignable to parameter of type 'number'.
```

---

noImplicitAny -> ç¦æ­¢å‡ºç°éšå¼çš„ any ç±»å‹

- TypeScript æä¾›äº†ä¸€ä¸ªç¼–è¯‘é€‰é¡¹ noImplicitAnyï¼Œæ‰“å¼€è¯¥é€‰é¡¹ï¼Œåªè¦æ¨æ–­å‡º any ç±»å‹å°±ä¼šæŠ¥é”™ã€‚
- æ¯”å¦‚æ‰§è¡Œå‘½ä»¤ -> `tsc --noImplicitAny xxx.ts`
- ç”±äºè¯¥å‘½ä»¤ä½¿ç”¨äº† noImplicitAny ç¼–è¯‘é€‰é¡¹è¿›è¡Œç¼–è¯‘ï¼Œè¿™æ—¶ `xxx.ts` ä¸­çš„å‡½æ•° `add()` å°±ä¼šæŠ¥é”™äº†ã€‚

---

ç‰¹æ®Šæƒ…å†µ -> var å’Œ let å‘½ä»¤å£°æ˜çš„å˜é‡

- å³ä½¿æ‰“å¼€äº† noImplicitAnyï¼Œä½¿ç”¨ let å’Œ var å‘½ä»¤å£°æ˜å˜é‡ï¼Œä½†ä¸èµ‹å€¼ä¹Ÿä¸æŒ‡å®šç±»å‹ï¼Œæ˜¯ä¸ä¼šæŠ¥é”™çš„ã€‚
- å»ºè®®ä½¿ç”¨ let å’Œ var å£°æ˜å˜é‡æ—¶ï¼Œå¦‚æœä¸èµ‹å€¼ï¼Œå°±ä¸€å®šè¦æ˜¾å¼å£°æ˜ç±»å‹ï¼Œå¦åˆ™å¯èƒ½å­˜åœ¨å®‰å…¨éšæ‚£ã€‚
- const å‘½ä»¤æ²¡æœ‰è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸º JavaScript è¯­è¨€è§„å®š const å£°æ˜å˜é‡æ—¶ï¼Œå¿…é¡»åŒæ—¶è¿›è¡Œåˆå§‹åŒ–ï¼ˆèµ‹å€¼ï¼‰ã€‚

```ts
var x // ä¸æŠ¥é”™
let y // ä¸æŠ¥é”™

// å˜é‡ x å’Œ y çš„ç±»å‹æ¨æ–­ä¸º anyï¼ŒTS ä¸ä¼šå¯¹å®ƒè¿›è¡Œç±»å‹æ£€æŸ¥
x = 123 // ä¸æŠ¥é”™
x = { foo: 'hello' } // ä¸æŠ¥é”™

const z // æŠ¥é”™
```

- å˜é‡ x å’Œ y å£°æ˜æ—¶æ²¡æœ‰èµ‹å€¼ï¼Œä¹Ÿæ²¡æœ‰æŒ‡å®šç±»å‹ï¼ŒTypeScript ä¼šæ¨æ–­å®ƒä»¬çš„ç±»å‹ä¸º anyã€‚è¿™æ—¶å³ä½¿æ‰“å¼€äº† noImplicitAnyï¼Œä¹Ÿä¸ä¼šæŠ¥é”™ã€‚
- const å‘½ä»¤å£°æ˜çš„ z æ˜¯ä¸èƒ½æ”¹å˜å€¼çš„ï¼Œå£°æ˜æ—¶å¿…é¡»åŒæ—¶èµ‹å€¼ï¼Œå¦åˆ™æŠ¥é”™ï¼Œæ‰€ä»¥å®ƒä¸å­˜åœ¨ç±»å‹æ¨æ–­ä¸º any çš„é—®é¢˜ã€‚

## 10. ğŸ¤” å…³äº any ç±»å‹çš„ä¸€äº›å¼€å‘å»ºè®®éƒ½æœ‰å“ªäº›ï¼Ÿ

- å¯¹äºé‚£äº›ç±»å‹ä¸æ˜æ˜¾çš„å˜é‡ï¼Œä¸€å®šè¦æ˜¾å¼å£°æ˜ç±»å‹ï¼Œé˜²æ­¢è¢«æ¨æ–­ä¸º anyï¼›
- å§‹ç»ˆå¼€å¯ TS çš„ noImplicitAny é…ç½®ï¼›
- ä½¿ç”¨ let å’Œ var å£°æ˜å˜é‡æ—¶ï¼Œå¦‚æœä¸èµ‹å€¼ï¼Œå°±ä¸€å®šè¦æ˜¾å¼å£°æ˜ç±»å‹ï¼Œå¦åˆ™å¯èƒ½å­˜åœ¨å®‰å…¨éšæ‚£ï¼›

## 11. ğŸ¤” noImplicitAny é…ç½®çš„ä½œç”¨æ˜¯ï¼Ÿ

- TypeScript æä¾›äº†ä¸€ä¸ªç¼–è¯‘é€‰é¡¹ noImplicitAnyï¼Œæ‰“å¼€è¯¥é€‰é¡¹ï¼Œåªè¦æ¨æ–­å‡º any ç±»å‹å°±ä¼šæŠ¥é”™ã€‚
- ç‰¹æ®Šæƒ…å†µï¼š
  - ä½¿ç”¨ varã€let å£°æ˜çš„å˜é‡å¦‚æœè¢«æ¨æ–­ä¸º any ç±»å‹æ˜¯ä¸ä¼šæŠ¥é”™çš„ã€‚
  - noImplicitAny çš„çº¦æŸæ›´å¤šä½“ç°åœ¨ã€Œå‡½æ•°å‚æ•°ã€çš„ç±»å‹çº¦æŸä¸Šï¼Œå¯¹äºã€Œå˜é‡ã€çš„ç±»å‹çº¦æŸèµ·ä¸åˆ°å¤šå¤§ä½œç”¨ã€‚
- å»ºè®®ï¼š
  - å§‹ç»ˆå°† noImplicitAny é…ç½®æ‰“å¼€ã€‚
  - ä½¿ç”¨ let å’Œ var å£°æ˜å˜é‡æ—¶ï¼Œå¦‚æœä¸èµ‹åˆå§‹å€¼ï¼Œå°±ä¸€å®šè¦æ˜¾å¼å£°æ˜ç±»å‹ï¼Œå¦åˆ™å¯èƒ½å­˜åœ¨å®‰å…¨éšæ‚£ã€‚

```json
{
  "compilerOptions": {
    "noImplicitAny": true
  }
}
```

```ts
function add(x, y) {
  return x + y
}

add(1, [1, 2, 3])

// TS ç±»å‹æ¨æ–­çš„ç»“æœå¦‚ä¸‹ï¼š
function add(x: any, y: any): any
```

- å…³é—­ noImplicitAnyï¼šä¸Šè¿°ç¨‹åºä¸ä¼šæŠ¥é”™
- å¼€å¯ noImplicitAnyï¼šæŠ¥é”™ï¼š
  - `Parameter 'x' implicitly has an 'any' type.`
  - `Parameter 'y' implicitly has an 'any' type.`

```ts
// å¼€å¯ noImplicitAny
var x1
let x2

// TS ç±»å‹æ¨æ–­çš„ç»“æœå¦‚ä¸‹ï¼š
var x1: any
let x2: any
```

- è™½ç„¶ x1ã€x2 è¢« TS æ¨æ–­ä¸ºäº† any ç±»å‹ï¼Œå¹¶ä¸”æˆ‘ä»¬ä¹Ÿæ‰“å¼€äº† noImplicitAny é…ç½®ï¼Œä½†æ˜¯ä¸Šè¿°ç¨‹åºå¹¶ä¸ä¼šæŠ¥é”™ã€‚è¿™æ˜¯ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œä½¿ç”¨ varã€let å£°æ˜çš„å˜é‡å¦‚æœè¢«æ¨æ–­ä¸º any ç±»å‹æ˜¯ä¸ä¼šæŠ¥é”™çš„ï¼Œæ— è®ºæ˜¯å¦å¼€å¯äº† noImplicitAny é…ç½®ã€‚ä½†æ˜¯å¯¹äº const å£°æ˜çš„å˜é‡å¹¶ä¸ä¼šå­˜åœ¨è¯¥é—®é¢˜ï¼Œå› ä¸º const å£°æ˜çš„å˜é‡å¿…é¡»åœ¨å£°æ˜çš„åŒæ—¶è¿›è¡Œåˆå§‹åŒ–ï¼ŒTS ä¸ä¼šå°†å…¶éšå¼åœ°æ¨æ–­ä¸º any ç±»å‹ã€‚
- ç”±æ­¤å¯è§ï¼ŒnoImplicitAny å¯¹äºå˜é‡è¢«æ¨æ–­ä¸º any ç±»å‹ï¼Œå…¶å®æ²¡å•¥å®é™…çš„çº¦æŸï¼Œä½¿ç”¨ varã€let å®šä¹‰çš„å˜é‡åœ¨æ²¡æœ‰èµ‹åˆå€¼çš„æƒ…å†µä¸‹ï¼Œä¾æ—§ä¼šè¢«æ¨æ–­ä¸º any ç±»å‹ï¼›noImplicitAny çš„çº¦æŸæ›´å¤šæ—¶å€™ä½“ç°åœ¨å‡½æ•°çš„å‚æ•°ç±»å‹ä¸Šã€‚

```ts
// å¼€å¯ noImplicitAny
var x1: number
let x2: string
var x3 // var x3: any ä¸æŠ¥é”™
let x4 // let x4: any ä¸æŠ¥é”™

x3 = 123 // âœ…
x4 = { foo: 'hello' } // âœ…
// x3ã€x4 è¢«æ¨æ–­ä¸º any ç±»å‹ï¼Œå¯ä»¥èµ‹ä»»æ„å€¼ã€‚

x1 = 123 // âœ…
x2 = 'abc' // âœ…

x1 = x2 // âŒ
// Type 'string' is not assignable to type 'number'.ts(2322)
```

- ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œå˜é‡ x3 å’Œ x4 å£°æ˜æ—¶æ²¡æœ‰èµ‹å€¼ï¼Œä¹Ÿæ²¡æœ‰æŒ‡å®šç±»å‹ï¼ŒTypeScript ä¼šæ¨æ–­å®ƒä»¬çš„ç±»å‹ä¸º anyã€‚è¿™æ—¶å³ä½¿æ‰“å¼€äº† noImplicitAnyï¼Œä¹Ÿä¸ä¼šæŠ¥é”™ã€‚
- å»ºè®®ä½¿ç”¨ let å’Œ var å£°æ˜å˜é‡æ—¶ï¼Œå¦‚æœä¸èµ‹åˆå§‹å€¼ï¼Œå°±ä¸€å®šè¦æ˜¾å¼å£°æ˜ç±»å‹ï¼Œå¦åˆ™å¯èƒ½å­˜åœ¨å®‰å…¨éšæ‚£ã€‚

## 12. ğŸ¤” any ç±»å‹çš„æ±¡æŸ“é—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿ

- any ç±»å‹é™¤äº†å…³é—­ç±»å‹æ£€æŸ¥ï¼Œæœ‰ä¸€ä¸ªå¾ˆå¤§çš„é—®é¢˜ï¼Œå°±æ˜¯å®ƒä¼š"æ±¡æŸ“"å…¶ä»–å˜é‡ã€‚
- any å¯ä»¥èµ‹å€¼ç»™å…¶ä»–ä»»ä½•ç±»å‹çš„å˜é‡ï¼ˆå› ä¸ºæ²¡æœ‰ç±»å‹æ£€æŸ¥ï¼‰ï¼Œå¯¼è‡´å…¶ä»–å˜é‡å‡ºé”™ã€‚
- æ±¡æŸ“å…¶ä»–å…·æœ‰æ­£ç¡®ç±»å‹çš„å˜é‡ï¼ŒæŠŠé”™è¯¯ç•™åˆ°è¿è¡Œæ—¶ï¼Œè¿™å°±æ˜¯ä¸å®œä½¿ç”¨ any ç±»å‹çš„å¦ä¸€ä¸ªä¸»è¦åŸå› ã€‚

```ts
const add: any = (a: number, b: number): number => a + b

// ä½¿ç”¨ add æ±¡æŸ“ result
const result = add(1, 2) // result å°†è¢«æ¨æ–­ä¸º any ç±»å‹

result.toUpperCase() // ä¸æŠ¥é”™ï¼Œå› ä¸º result è¢« add æ±¡æŸ“äº†
```

- è¯­å¥ 1. `const add: any = (a: number, b: number): number => a + b` add å‡½æ•°æ˜¯ any ç±»å‹
- è¯­å¥ 2. `const result = add(1, 2)`
- è¯­å¥ 3. `result.toUpperCase()`

2 æ‰§è¡Œä¹‹åï¼Œresult è¢« add æ±¡æŸ“äº†ï¼Œä¹Ÿæˆä¸ºäº† any ç±»å‹ï¼Œå› æ­¤ï¼Œä¸Šè¿°çš„ ã€Œè¯­å¥ 3ã€ å¹¶ä¸ä¼šæŠ¥é”™ã€‚

```ts
// ä¸‹é¢æ˜¯æ¨èçš„å†™æ³•ï¼š
const add = (a: number, b: number): number => a + b
const result = add(1, 2)
// result å°†è¢«æ¨æ–­ä¸º number ç±»å‹

result.toUpperCase()
// âŒ æŠ¥é”™ï¼š
// Property 'toUpperCase' does not exist on type 'number'.(2339)
// ç±»å‹"number"ä¸Šä¸å­˜åœ¨å±æ€§"toUpperCase"ã€‚ts(2339)
```

- ç”±äº `toUpperCase()` æ˜¯å­—ç¬¦ä¸²ç‰¹æœ‰çš„ï¼Œæ•°å­—ç±»å‹çš„åŸå‹é“¾ä¸Šé»˜è®¤æ˜¯ä¸å­˜åœ¨è¿™æ ·ä¸€ä¸ª API çš„ï¼Œåº”è¯¥åŠæ—¶æŠ¥é”™ï¼Œæ‰æ˜¯æˆ‘ä»¬æ›´å¸Œæœ›çœ‹åˆ°çš„ã€‚

```ts
let x: any = 'hello'
let y: number

// x æ±¡æŸ“ y
y = x // ä¸æŠ¥é”™

y * 123 // ä¸æŠ¥é”™
y.toFixed() // ä¸æŠ¥é”™
```

- ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œå˜é‡ x çš„ç±»å‹æ˜¯ anyï¼Œå®é™…çš„å€¼æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚å˜é‡ y çš„ç±»å‹æ˜¯ numberï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªæ•°å€¼å˜é‡ï¼Œä½†æ˜¯å®ƒè¢«èµ‹å€¼ä¸º xï¼Œè¿™æ—¶å¹¶ä¸ä¼šæŠ¥é”™ã€‚ç„¶åï¼Œå˜é‡ y ç»§ç»­è¿›è¡Œå„ç§æ•°å€¼è¿ç®—ï¼ŒTypeScript ä¹Ÿæ£€æŸ¥ä¸å‡ºé”™è¯¯ï¼Œé—®é¢˜å°±è¿™æ ·ç•™åˆ°è¿è¡Œæ—¶æ‰ä¼šæš´éœ²ã€‚

## 13. ğŸ¤” ç©ºæ•°ç»„ä¼šè¢« TS æ¨æ–­ä¸ºä»€ä¹ˆç±»å‹ï¼Ÿ

æ²¡æœ‰å£°æ˜ç±»å‹çš„ç©ºæ•°ç»„ï¼Œé»˜è®¤ä¼šè¢« TypeScript è§†ä½œä¸€ä¸ª any ç±»å‹çš„æ•°ç»„ã€‚

å¦‚æœå¼€å¯äº† strictNullChecks é…ç½®ï¼Œå¹¶ä¸”å…³é—­äº† noImplicitAny é…ç½®ï¼Œé‚£ä¹ˆ TypeScript ä¼šå°†æ²¡æœ‰å£°æ˜ç±»å‹çš„ç©ºæ•°ç»„è§†ä½œä¸€ä¸ª never ç±»å‹çš„æ•°ç»„ã€‚å¦åˆ™ä¼šè¢«æ¨æ–­ä¸º `any[]`ã€‚

::: code-group

```ts [any æ•°ç»„]
// tsconfig.json ä¸æ»¡è¶³ï¼š
// {
//   "compilerOptions": {
//     "strictNullChecks": true,
//     "noImplicitAny": false
//   }
// }

const arr = []

// ç­‰æ•ˆ
// const arr: any[]

arr.push(1, 2, 3) // ok
```

```ts [never æ•°ç»„]
// tsconfig.json æ»¡è¶³ï¼š
// {
//   "compilerOptions": {
//     "strictNullChecks": true,
//     "noImplicitAny": false
//   }
// }

const arr = []

// ç­‰æ•ˆ
// const arr: never[]

arr.push(1, 2, 3) // error
// Argument of type 'number' is not assignable to parameter of type 'never'.
```

:::

## 14. ğŸ”— å¼•ç”¨

- [any][2]
- [noImplicitAny][1]

[1]: https://www.typescriptlang.org/docs/handbook/2/basic-types.html#noimplicitany
[2]: https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#any

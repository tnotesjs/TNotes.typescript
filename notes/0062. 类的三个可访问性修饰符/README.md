# [0062. ç±»çš„ä¸‰ä¸ªå¯è®¿é—®æ€§ä¿®é¥°ç¬¦](https://github.com/tnotesjs/TNotes.typescript/tree/main/notes/0062.%20%E7%B1%BB%E7%9A%84%E4%B8%89%E4%B8%AA%E5%8F%AF%E8%AE%BF%E9%97%AE%E6%80%A7%E4%BF%AE%E9%A5%B0%E7%AC%A6)

<!-- region:toc -->

- [1. ğŸ¯ æœ¬èŠ‚å†…å®¹](#1--æœ¬èŠ‚å†…å®¹)
- [2. ğŸ«§ è¯„ä»·](#2--è¯„ä»·)
- [3. ğŸ¤” TypeScript ç±»ä¸­çš„ publicã€private å’Œ protected ä¿®é¥°ç¬¦æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ](#3--typescript-ç±»ä¸­çš„-publicprivate-å’Œ-protected-ä¿®é¥°ç¬¦æœ‰ä»€ä¹ˆä½œç”¨)
- [4. ğŸ¤” è®¿é—®æ€§ä¿®é¥°ç¬¦ä¹¦å†™åœ¨ä»€ä¹ˆä½ç½®ï¼Ÿ](#4--è®¿é—®æ€§ä¿®é¥°ç¬¦ä¹¦å†™åœ¨ä»€ä¹ˆä½ç½®)
  - [4.1. å†™åœ¨å£°æ˜å‰é¢](#41-å†™åœ¨å£°æ˜å‰é¢)
  - [4.2. åœ¨ç±»çš„æ„é€ å‡½æ•°å‚æ•°ä¸­ç›´æ¥ä½¿ç”¨ public/private/protected](#42-åœ¨ç±»çš„æ„é€ å‡½æ•°å‚æ•°ä¸­ç›´æ¥ä½¿ç”¨-publicprivateprotected)
- [5. ğŸ¤” public æ˜¯ä¸æ˜¯å¿…é¡»æ˜¾å¼å†™å‡ºï¼Ÿä¸å†™è®¿é—®ä¿®é¥°ç¬¦é»˜è®¤æ˜¯ä»€ä¹ˆï¼Ÿ](#5--public-æ˜¯ä¸æ˜¯å¿…é¡»æ˜¾å¼å†™å‡ºä¸å†™è®¿é—®ä¿®é¥°ç¬¦é»˜è®¤æ˜¯ä»€ä¹ˆ)
- [6. ğŸ¤” private ä¿®é¥°çš„æˆå‘˜çœŸçš„å®Œå…¨æ— æ³•ä»å¤–éƒ¨è®¿é—®å—ï¼Ÿ](#6--private-ä¿®é¥°çš„æˆå‘˜çœŸçš„å®Œå…¨æ— æ³•ä»å¤–éƒ¨è®¿é—®å—)
- [7. ğŸ†š â€œTS çš„ privateâ€ vs. â€œES çš„ `#ç§æœ‰å­—æ®µ`â€](#7--ts-çš„-private-vs-es-çš„-ç§æœ‰å­—æ®µ)
  - [7.1. å¯¹æ¯”](#71-å¯¹æ¯”)
  - [7.2. ES `#ç§æœ‰å­—æ®µ` å¯¹ `target` ç¼–è¯‘ç›®æ ‡çš„è¦æ±‚](#72-es-ç§æœ‰å­—æ®µ-å¯¹-target-ç¼–è¯‘ç›®æ ‡çš„è¦æ±‚)
- [8. ğŸ¤– ç¤¾åŒºç›®å‰ï¼ˆ2025ï¼‰æ›´æ¨èä½¿ç”¨ `#ç§æœ‰å­—æ®µ` è¿˜æ˜¯ TypeScript çš„ `private` ä¿®é¥°ç¬¦ï¼Ÿ](#8--ç¤¾åŒºç›®å‰2025æ›´æ¨èä½¿ç”¨-ç§æœ‰å­—æ®µ-è¿˜æ˜¯-typescript-çš„-private-ä¿®é¥°ç¬¦)
  - [8.1. å†³ç­–æŒ‡å—](#81-å†³ç­–æŒ‡å—)
  - [8.2. å®è·µè¶‹åŠ¿](#82-å®è·µè¶‹åŠ¿)
  - [8.3. æœ€ä½³å®è·µ](#83-æœ€ä½³å®è·µ)
- [9. ğŸ¤” protected å’Œ private æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿä»€ä¹ˆæ—¶å€™ç”¨ protectedï¼Ÿ](#9--protected-å’Œ-private-æœ‰ä»€ä¹ˆåŒºåˆ«ä»€ä¹ˆæ—¶å€™ç”¨-protected)
- [10. ğŸ¤” æ„é€ å‡½æ•°ä¹Ÿå¯ä»¥ç”¨ private æˆ– protected å—ï¼Ÿæœ‰ä»€ä¹ˆç”¨ï¼Ÿ](#10--æ„é€ å‡½æ•°ä¹Ÿå¯ä»¥ç”¨-private-æˆ–-protected-å—æœ‰ä»€ä¹ˆç”¨)
- [11. ğŸ¤” æ¥å£æˆ–ç±»å‹å®šä¹‰ä¸­èƒ½ä½¿ç”¨ private/protected å—ï¼Ÿ](#11--æ¥å£æˆ–ç±»å‹å®šä¹‰ä¸­èƒ½ä½¿ç”¨-privateprotected-å—)
- [12. ğŸ”— å¼•ç”¨](#12--å¼•ç”¨)

<!-- endregion:toc -->

## 1. ğŸ¯ æœ¬èŠ‚å†…å®¹

- access modifiers
- public
- private
- protected
- å‚æ•°å±æ€§ - parameter property

## 2. ğŸ«§ è¯„ä»·

publicã€private å’Œ protected æ˜¯è®¿é—®ä¿®é¥°ç¬¦ï¼ˆaccess modifiersï¼‰ï¼Œå®ƒä»¬æ˜¯ TS ä¸­ç‰¹æœ‰çš„ï¼Œç¼–è¯‘äº§ç‰© JS ä¸­ä¼šè‡ªåŠ¨ç§»é™¤ã€‚

è®¿é—®ä¿®é¥°ç¬¦æä¾›çš„çº¦æŸä¹Ÿä»…ä»…åœç•™åœ¨ TS å±‚é¢ï¼Œå¯¹è¿è¡Œæ—¶çš„ JS æ— å½±å“ã€‚

å½“ä½ åœ¨å¼€å‘ TS é¡¹ç›®æ—¶ï¼Œä¹¦å†™ç±»çš„æ—¶å€™å¯ä»¥åˆ©ç”¨è¿™äº›ä¿®é¥°ç¬¦æ¥çº¦æŸç›¸å…³æˆå‘˜çš„è®¿é—®æƒé™ã€‚

## 3. ğŸ¤” TypeScript ç±»ä¸­çš„ publicã€private å’Œ protected ä¿®é¥°ç¬¦æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ

åœ¨ TypeScript ä¸­ï¼Œpublicã€private å’Œ protected æ˜¯è®¿é—®ä¿®é¥°ç¬¦ï¼ˆaccess modifiersï¼‰ï¼Œç”¨äºæ§åˆ¶ç±»æˆå‘˜ï¼ˆå±æ€§å’Œæ–¹æ³•ï¼‰çš„å¯è§æ€§å’Œå¯è®¿é—®æ€§ã€‚å®ƒä»¬å¸®åŠ©å¼€å‘è€…å°è£…æ•°æ®ã€éšè—å®ç°ç»†èŠ‚ï¼Œå¹¶æ˜ç¡®ç±»çš„ä½¿ç”¨å¥‘çº¦ã€‚

- publicï¼ˆé»˜è®¤ï¼‰ï¼šæˆå‘˜å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹è¢«è®¿é—®ï¼ŒåŒ…æ‹¬ç±»å†…éƒ¨ã€å­ç±»å’Œç±»çš„å®ä¾‹ã€‚
- privateï¼šæˆå‘˜åªèƒ½åœ¨å£°æ˜å®ƒçš„ç±»å†…éƒ¨è®¿é—®ï¼Œä¸èƒ½åœ¨å­ç±»æˆ–ç±»å¤–éƒ¨è®¿é—®ã€‚
- protectedï¼šæˆå‘˜å¯ä»¥åœ¨å£°æ˜å®ƒçš„ç±»å†…éƒ¨ä»¥åŠå…¶å­ç±»ä¸­è®¿é—®ï¼Œä½†ä¸èƒ½åœ¨ç±»å¤–éƒ¨ï¼ˆåŒ…æ‹¬å®ä¾‹ï¼‰è®¿é—®ã€‚

è¿™äº›ä¿®é¥°ç¬¦åªåœ¨ TypeScript ç¼–è¯‘æœŸèµ·ä½œç”¨ï¼Œç¼–è¯‘æˆ JavaScript åä¸ä¼šä¿ç•™è®¿é—®é™åˆ¶ï¼ˆå› ä¸º JavaScript æœ¬èº«åœ¨è¾ƒæ–°æ ‡å‡†å‰æ²¡æœ‰åŸç”Ÿç§æœ‰æˆå‘˜æ”¯æŒï¼Œä¸è¿‡ç°ä»£ JS æœ‰ #private è¯­æ³•ï¼Œä½† TS çš„ private ä¸ä¹‹ä¸åŒï¼‰ã€‚

## 4. ğŸ¤” è®¿é—®æ€§ä¿®é¥°ç¬¦ä¹¦å†™åœ¨ä»€ä¹ˆä½ç½®ï¼Ÿ

1. å†™åœ¨å£°æ˜å‰é¢ï¼ˆå¸¸è§ï¼‰
2. åœ¨ç±»çš„æ„é€ å‡½æ•°å‚æ•°ä¸­ç›´æ¥ä½¿ç”¨ public/private/protectedï¼ˆTS æä¾›çš„è¯­æ³•ç³–ï¼Œå¯æ ¹æ®å›¢é˜Ÿå¼€å‘è§„èŒƒé€‰æ‹©æ˜¯å¦åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ï¼‰

### 4.1. å†™åœ¨å£°æ˜å‰é¢

å¯ä»¥åœ¨ç±»ä¸­å®šä¹‰æˆå‘˜å˜é‡çš„æ—¶å€™ï¼Œå°†è®¿é—®ä¿®é¥°ç¬¦ä¹¦å†™åœ¨æˆå‘˜åç§°å‰é¢ã€‚

```ts
// public ä¿®é¥°ç¬¦è¡¨ç¤ºè¿™æ˜¯å…¬å¼€æˆå‘˜ï¼Œå¤–éƒ¨å¯ä»¥è‡ªç”±è®¿é—®ï¼š
class Greeter {
  public greet() {
    console.log('hi!')
  }
}
```

```ts
// private ä¿®é¥°ç¬¦è¡¨ç¤ºç§æœ‰æˆå‘˜ï¼Œåªèƒ½ç”¨åœ¨å½“å‰ç±»çš„å†…éƒ¨ï¼š
class A {
  private x: number = 0
}

const a = new A()
a.x // æŠ¥é”™
```

```ts
// protected ä¿®é¥°ç¬¦è¡¨ç¤ºè¯¥æˆå‘˜æ˜¯ä¿æŠ¤æˆå‘˜ï¼Œåªèƒ½åœ¨ç±»çš„å†…éƒ¨ä½¿ç”¨è¯¥æˆå‘˜ï¼Œ
// å®ä¾‹æ— æ³•ä½¿ç”¨è¯¥æˆå‘˜ï¼Œä½†æ˜¯å­ç±»å†…éƒ¨å¯ä»¥ä½¿ç”¨ï¼š
class A {
  protected x = 1
}

class B extends A {
  getX() {
    return this.x
  }
}
```

ä¹Ÿå¯ä»¥åœ¨ç±»çš„æ–¹æ³•å‚æ•°ä¸­ç›´æ¥ä½¿ç”¨ public/private/protectedï¼Œè¿™æ˜¯ TS æä¾›çš„å®šä¹‰å±æ€§çš„è¯­æ³•ç³– - å‚æ•°å±æ€§ã€‚

### 4.2. åœ¨ç±»çš„æ„é€ å‡½æ•°å‚æ•°ä¸­ç›´æ¥ä½¿ç”¨ public/private/protected

TypeScript æ”¯æŒåœ¨æ„é€ å‡½æ•°å‚æ•°ä¸Šç›´æ¥æ·»åŠ è®¿é—®ä¿®é¥°ç¬¦ï¼Œè¿™ç§°ä¸ºå‚æ•°å±æ€§ï¼ˆparameter propertiesï¼‰ã€‚å®ƒä¼šè‡ªåŠ¨åœ¨ç±»ä¸­å£°æ˜åŒåå±æ€§å¹¶åˆå§‹åŒ–ã€‚

ä¾‹å¦‚ï¼š

```ts
class User {
  constructor(
    public name: string, // ç­‰ä»·äº this.name = name; ä¸”å£°æ˜ public name: string
    private email: string // ç­‰ä»·äº this.email = email; ä¸”å£°æ˜ private email: string
  ) {}
}
```

è¿™ç›¸å½“äºï¼š

```ts
class User {
  public name: string
  private email: string
  constructor(name: string, email: string) {
    this.name = name
    this.email = email
  }
}
```

è¿™ç§å†™æ³•ç®€æ´é«˜æ•ˆï¼Œå¸¸ç”¨äºä¾èµ–æ³¨å…¥æˆ–åˆå§‹åŒ–å¤§é‡å±æ€§çš„åœºæ™¯ã€‚æ˜¯ TS ç»™æˆ‘ä»¬æä¾›çš„è¯­æ³•ç³–ã€‚

## 5. ğŸ¤” public æ˜¯ä¸æ˜¯å¿…é¡»æ˜¾å¼å†™å‡ºï¼Ÿä¸å†™è®¿é—®ä¿®é¥°ç¬¦é»˜è®¤æ˜¯ä»€ä¹ˆï¼Ÿ

public å¿…æ˜¾å¼å†™å‡ºï¼Œå†™æˆ–è€…ä¸å†™ public æ•ˆæœéƒ½æ˜¯ä¸€æ ·çš„ã€‚

åœ¨ TypeScript ä¸­ï¼Œå¦‚æœä¸æ˜¾å¼æŒ‡å®šè®¿é—®ä¿®é¥°ç¬¦ï¼Œé»˜è®¤å°±æ˜¯ publicã€‚

ä¾‹å¦‚ï¼š

```ts
class Person {
  name: string // ç­‰ä»·äº public name: string;
  public age: number // æ˜¾å¼å£°æ˜ä¸º public
}
```

è¿™ä¸¤ç§å†™æ³•åœ¨è¡Œä¸ºä¸Šå®Œå…¨ä¸€è‡´ï¼Œéƒ½å¯ä»¥åœ¨ç±»å†…å¤–è‡ªç”±è®¿é—®ã€‚

å…·ä½“æ˜¯å¦è¦æ˜¾å¼å†™å‡º publicï¼Œéœ€è¦æ ¹æ®å›¢é˜Ÿé¡¹ç›®å¼€å‘è§„èŒƒæ¥å®šï¼š

- å¦‚æœç¡®å®šè¦ç»™æ‰€æœ‰çš„æˆå‘˜éƒ½åŠ ä¸Šæ˜¾å¼çš„è®¿é—®ä¿®é¥°ç¬¦å£°æ˜ï¼Œé‚£è·Ÿç€è§„èŒƒèµ°ï¼Œç»Ÿä¸€å°† public éƒ½å†™å‡ºæ¥å°±è¡Œäº†ï¼›
- å¦‚æœè®¤ä¸ºå†™ public æœ‰äº›å†—ä½™ï¼Œé‚£å°±ç»Ÿä¸€éƒ½ä¸å†™ publicï¼›

## 6. ğŸ¤” private ä¿®é¥°çš„æˆå‘˜çœŸçš„å®Œå…¨æ— æ³•ä»å¤–éƒ¨è®¿é—®å—ï¼Ÿ

åœ¨ TypeScript ç¼–è¯‘æœŸï¼Œprivate æˆå‘˜ç¡®å®æ— æ³•ä»ç±»å¤–éƒ¨è®¿é—®ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼š

```ts
class Secret {
  private code = '1234'
}

const s = new Secret()
console.log(s.code) // âŒ æŠ¥é”™
// Property 'code' is private and only accessible within class 'Secret'.(2341)

// å°æç¤ºï¼šå¦‚æœä¸æƒ³è¦æŠ¥é”™ï¼Œå¯ä»¥åˆ©ç”¨æ–¹æ‹¬å·çš„åŠ¨æ€å±æ€§è¯­æ³•æ¥è®¿é—®
// æ¯”å¦‚ï¼šs['code']
// è¿™ç§è¯­æ³• TS æ£€æŸ¥ä¸å‡ºæ¥ï¼Œè‡ªç„¶å°±ä¸ä¼šæŠ¥é”™äº†ã€‚
```

ä½†è¦æ³¨æ„ï¼šTypeScript çš„ private æ˜¯ç¼–è¯‘æ—¶çš„çº¦æŸï¼Œä¸æ˜¯è¿è¡Œæ—¶çš„ä¿æŠ¤ã€‚ç¼–è¯‘åçš„ JavaScript ä»£ç ä¸­ï¼Œè¯¥å±æ€§ä»ç„¶å­˜åœ¨ä¸”å¯è¢«è®¿é—®ï¼ˆé™¤éä½¿ç”¨ ECMAScript çš„ `#ç§æœ‰å­—æ®µ` è¯­æ³•ï¼‰ã€‚ä¾‹å¦‚ï¼Œä¸Šè¿°ä»£ç å¿½ç•¥ç¼–è¯‘æŠ¥é”™çš„è¯ï¼Œæœ€ç»ˆç¼–è¯‘åä¼šå¾—åˆ°å¦‚ä¸‹ JS ç¨‹åºï¼š

```js
'use strict'
class Secret {
  constructor() {
    this.code = '1234'
  }
}
const s = new Secret()
console.log(s.code)
```

å¾ˆæ˜¾ç„¶ï¼Œåœ¨è¿è¡Œæ—¶é€šè¿‡ `s.code` æ˜¯å¯ä»¥è®¿é—®çš„ã€‚å› æ­¤ï¼Œprivate ä¸»è¦ç”¨äºå¼€å‘æ—¶çš„ç±»å‹å®‰å…¨å’Œè®¾è®¡æ„å›¾è¡¨è¾¾ï¼Œè€Œéå®‰å…¨éš”ç¦»ã€‚

## 7. ğŸ†š â€œTS çš„ privateâ€ vs. â€œES çš„ `#ç§æœ‰å­—æ®µ`â€

### 7.1. å¯¹æ¯”

TypeScript çš„ `private` æ˜¯ç¼–è¯‘æ—¶çš„ç±»å‹ç³»ç»Ÿæ¦‚å¿µï¼Œä»…åœ¨ TypeScript ç¼–è¯‘é˜¶æ®µæä¾›è®¿é—®æ£€æŸ¥ï¼Œç¼–è¯‘åçš„ JavaScript ä»£ç ä¸­è¯¥æˆå‘˜ä»æ˜¯æ™®é€šå±æ€§ã€‚å¹¶ä¸” TS ä¸­çš„ `private` æ£€æŸ¥ï¼Œæ˜¯å¯ä»¥é€šè¿‡æ–¹æ‹¬å·çš„åŠ¨æ€å±æ€§è¯­æ³•ï¼ˆå¦‚ `obj["prop"]`ï¼‰ç»•è¿‡ã€‚

è€Œ ECMAScript çš„ `#ç§æœ‰å­—æ®µ`ï¼ˆä¾‹å¦‚ `#name`ï¼‰æ˜¯è¿è¡Œæ—¶çš„çœŸæ­£ç§æœ‰æˆå‘˜ï¼Œç”± JavaScript å¼•æ“åŸç”Ÿæ”¯æŒï¼Œæ— æ³•ä»ç±»å¤–éƒ¨ä»¥ä»»ä½•æ–¹å¼è®¿é—®ï¼Œå³ä½¿ä½¿ç”¨ `obj["#name"]` ä¹Ÿä¸è¡Œã€‚

ç¤ºä¾‹å¯¹æ¯”ï¼š

```ts
// TypeScript privateï¼ˆç¼–è¯‘åå˜ä¸ºæ™®é€šå±æ€§ï¼‰
class A {
  private x = 1
}
const a = new A()
console.log(a['x']) // âœ… è¿è¡Œæ—¶å¯è®¿é—®ï¼ˆä½† TS ç¼–è¯‘æ—¶æŠ¥é”™ï¼‰

// ECMAScript #ç§æœ‰å­—æ®µï¼ˆTS ä¹Ÿæ”¯æŒï¼‰
class B {
  #y = 2
}
const b = new B()
console.log(b['#y']) // âŒ undefinedï¼Œè¿è¡Œæ—¶ä¹Ÿæ— æ³•è®¿é—®
```

å°ç»“ï¼š

- è‹¥éœ€è¦çœŸæ­£çš„è¿è¡Œæ—¶ç§æœ‰æ€§ï¼Œåº”ä½¿ç”¨ `#` è¯­æ³•ï¼›
- è‹¥ä»…éœ€å¼€å‘æœŸç±»å‹å®‰å…¨å’Œå°è£…æ„å›¾è¡¨è¾¾ï¼Œ`private` ä¹Ÿè¡Œï¼›

### 7.2. ES `#ç§æœ‰å­—æ®µ` å¯¹ `target` ç¼–è¯‘ç›®æ ‡çš„è¦æ±‚

target è¦æ±‚å¤§äº ES2021ï¼Œå¦‚æœå°äºç­‰äº ES2021 çš„è¯ï¼ŒTS ä¼šä½¿ç”¨ `WeakMaps` æ›¿ä»£ `#` æ¥å®ç°ã€‚

æ¥çœ‹ä¸€ä¸‹å®˜æ–¹æä¾›çš„ç¤ºä¾‹ï¼š

```ts
// TS æºç 
class Dog {
  #barkAmount = 0
  personality = 'happy'

  constructor() {}
}
```

```js
// target > ES2021
// ç¼–è¯‘åçš„ JS
'use strict'
class Dog {
  #barkAmount = 0
  personality = 'happy'
  constructor() {}
}
```

```js
// target <= ES2021
// ç¼–è¯‘åçš„ JS
'use strict'
var _Dog_barkAmount
class Dog {
  constructor() {
    _Dog_barkAmount.set(this, 0)
    this.personality = 'happy'
  }
}
_Dog_barkAmount = new WeakMap()
```

## 8. ğŸ¤– ç¤¾åŒºç›®å‰ï¼ˆ2025ï¼‰æ›´æ¨èä½¿ç”¨ `#ç§æœ‰å­—æ®µ` è¿˜æ˜¯ TypeScript çš„ `private` ä¿®é¥°ç¬¦ï¼Ÿ

æˆªè‡³ 2025 å¹´ï¼Œç¤¾åŒºå·²å½¢æˆæ˜ç¡®çš„å®è·µå…±è¯†ï¼šæ ¹æ®ç§æœ‰æ€§éœ€æ±‚çš„ä¸¥æ ¼ç¨‹åº¦é€‰æ‹©é€‚å½“çš„æœºåˆ¶ã€‚

### 8.1. å†³ç­–æŒ‡å—

| åœºæ™¯ | æ¨èæ–¹æ¡ˆ | ç†ç”± |
| --- | --- | --- |
| éœ€è¦è¿è¡Œæ—¶çœŸæ­£ç§æœ‰æ€§ï¼ˆé˜²æ­¢é€šè¿‡ `obj["prop"]`ã€åå°„ã€è°ƒè¯•å·¥å…·ç­‰è®¿é—®ï¼‰ | `#ç§æœ‰å­—æ®µ` | æä¾›è¯­è¨€çº§è¿è¡Œæ—¶ä¿æŠ¤ï¼Œä¸å¯ç»•è¿‡ |
| å¼€å‘åº“/æ¡†æ¶ï¼Œéœ€ä¸¥æ ¼å°è£…å†…éƒ¨å®ç° | `#ç§æœ‰å­—æ®µ` | é˜²æ­¢ç”¨æˆ·ä¾èµ–éå…¬å¼€ APIï¼Œå¢å¼ºç‰ˆæœ¬å…¼å®¹æ€§ |
| ç›®æ ‡ç¯å¢ƒæ”¯æŒ ES2022+ | `#ç§æœ‰å­—æ®µ` | åŸç”Ÿæ”¯æŒï¼Œç¼–è¯‘åä»£ç æ›´ç®€æ´ |
| éœ€è¦åœ¨æ¥å£ä¸­æè¿°çš„æˆå‘˜ | `private` | æ¥å£æ— æ³•åŒ…å«ç§æœ‰æˆå‘˜ |
| ä»…éœ€ç¼–è¯‘æœŸç±»å‹æ£€æŸ¥ | `private` | è¯­æ³•æ›´ç®€æ´ï¼Œç¬¦åˆ TS è®¾è®¡å“²å­¦ |
| éœ€è¦è°ƒè¯•å¯è§æ€§ | `private` | `#å­—æ®µ` åœ¨è°ƒè¯•å™¨ä¸­ä¸å¯è§ |

### 8.2. å®è·µè¶‹åŠ¿

- åº“ä½œè€…ï¼šæ™®éé‡‡ç”¨ `#ç§æœ‰å­—æ®µ` ä¿æŠ¤æ ¸å¿ƒå®ç°ï¼Œç¡®ä¿ API è¾¹ç•Œæ¸…æ™°
- åº”ç”¨å¼€å‘è€…ï¼š80% ä»¥ä¸Šåœºæ™¯ä½¿ç”¨ `private`ï¼Œä»…åœ¨å…³é”®å®‰å…¨/å°è£…åœºæ™¯ä½¿ç”¨ `#`
- æ¡†æ¶æ¼”è¿›ï¼šAngular 17+ã€React 19+ åœ¨å†…éƒ¨å®ç°ä¸­å¹¿æ³›é‡‡ç”¨ `#å­—æ®µ`
- å·¥å…·é“¾ï¼šTypeScript 5.5+ æä¾›æ›´å®Œå–„çš„ `#å­—æ®µ` ç±»å‹æ¨å¯¼å’Œé”™è¯¯æç¤º

### 8.3. æœ€ä½³å®è·µ

1. æ˜ç¡®éœ€æ±‚ï¼šå…ˆç¡®å®šæ˜¯å¦éœ€è¦è¿è¡Œæ—¶ç§æœ‰æ€§ï¼Œè€Œéç¼–è¯‘æœŸæ£€æŸ¥
2. ä¿æŒä¸€è‡´æ€§ï¼šé¡¹ç›®å†…ç»Ÿä¸€é€‰æ‹©ä¸€ç§æ¨¡å¼ï¼Œé¿å…æ··ç”¨
3. æ¸è¿›é‡‡ç”¨ï¼šæ–°é¡¹ç›®å¯ç›´æ¥ä½¿ç”¨ `#å­—æ®µ`ï¼›æ—§é¡¹ç›®å¯é€æ­¥è¿ç§»å…³é”®ç§æœ‰æˆå‘˜
4. æ–‡æ¡£è¯´æ˜ï¼šå¯¹ä½¿ç”¨ `#å­—æ®µ` çš„ API æ˜ç¡®æ ‡æ³¨"æ­¤ä¸ºä¸¥æ ¼ç§æœ‰å®ç°ï¼Œä¸å¾—ä¾èµ–"

å…³é”®åŒºåˆ«ï¼š`private` æ˜¯ç±»å‹ç³»ç»Ÿå¥‘çº¦ï¼ˆç¼–è¯‘æœŸæ£€æŸ¥ï¼‰ï¼Œ`#å­—æ®µ` æ˜¯è¯­è¨€è¿è¡Œæ—¶ç‰¹æ€§ï¼ˆä¸å¯ç»•è¿‡çš„ç§æœ‰æ€§ï¼‰ã€‚é€‰æ‹©åº”åŸºäºå®é™…éœ€æ±‚ï¼Œè€Œéå•çº¯è¿½æ±‚"æ›´ç§æœ‰"ã€‚

## 9. ğŸ¤” protected å’Œ private æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿä»€ä¹ˆæ—¶å€™ç”¨ protectedï¼Ÿ

åŒºåˆ«åœ¨äºç»§æ‰¿æ—¶çš„å¯è®¿é—®æ€§ï¼š

- privateï¼šä»…åœ¨å½“å‰ç±»å†…éƒ¨å¯è®¿é—®ï¼Œå­ç±»ä¹Ÿæ— æ³•è®¿é—®ã€‚
- protectedï¼šå½“å‰ç±»å’Œæ‰€æœ‰å­ç±»å†…éƒ¨å¯è®¿é—®ï¼Œä½†ç±»å¤–éƒ¨ï¼ˆåŒ…æ‹¬å®ä¾‹ï¼‰ä¸å¯è®¿é—®ã€‚

ä½¿ç”¨åœºæ™¯ï¼šå½“ä½ å¸Œæœ›æŸäº›æˆå‘˜è¢«å­ç±»ç»§æ‰¿å¹¶ä½¿ç”¨ï¼Œä½†åˆä¸å¸Œæœ›å¤–éƒ¨ä»£ç ç›´æ¥è°ƒç”¨æ—¶ï¼Œå°±ç”¨ protectedã€‚

ä¾‹å¦‚ï¼š

```ts
class Animal {
  protected name: string
  constructor(name: string) {
    this.name = name
  }
}

class Dog extends Animal {
  bark() {
    console.log(`${this.name} barks!`) // âœ… å…è®¸ï¼šå­ç±»å¯è®¿é—® protected æˆå‘˜
  }
}

const dog = new Dog('Buddy')
console.log(dog.name) // âŒ é”™è¯¯ï¼šå¤–éƒ¨ä¸èƒ½è®¿é—® protected æˆå‘˜
// Property 'name' is protected and only accessible within class 'Animal' and its subclasses.(2445)
```

## 10. ğŸ¤” æ„é€ å‡½æ•°ä¹Ÿå¯ä»¥ç”¨ private æˆ– protected å—ï¼Ÿæœ‰ä»€ä¹ˆç”¨ï¼Ÿ

å¯ä»¥ã€‚å°†æ„é€ å‡½æ•°æ ‡è®°ä¸º private æˆ– protected æ˜¯ä¸€ç§æ§åˆ¶ç±»å®ä¾‹åŒ–æ–¹å¼çš„è®¾è®¡æ¨¡å¼ã€‚

- private constructorï¼šç¦æ­¢å¤–éƒ¨ç›´æ¥ `new` åˆ›å»ºå®ä¾‹ï¼Œå¸¸ç”¨äºå•ä¾‹æ¨¡å¼æˆ–é™æ€å·¥å‚æ–¹æ³•ã€‚
- protected constructorï¼šå…è®¸å­ç±»ç»§æ‰¿å¹¶è°ƒç”¨æ„é€ å‡½æ•°ï¼Œä½†ç¦æ­¢å¤–éƒ¨ç›´æ¥å®ä¾‹åŒ–ï¼Œå¸¸ç”¨äºæŠ½è±¡åŸºç±»æˆ–ç¡®ä¿é€šè¿‡å­ç±»åˆ›å»ºå®ä¾‹ã€‚

ç¤ºä¾‹ï¼ˆå•ä¾‹ï¼‰ï¼š

```ts
class Singleton {
  private static instance: Singleton
  private constructor() {} // å¤–éƒ¨æ— æ³• new

  static getInstance() {
    if (!Singleton.instance) {
      Singleton.instance = new Singleton()
    }
    return Singleton.instance
  }
}

// const s = new Singleton(); // âŒ é”™è¯¯åšæ³•
// Constructor of class 'Singleton' is private and only accessible within the class declaration.(2673)

const s = Singleton.getInstance() // âœ… æ­£ç¡®åšæ³•
```

ç¤ºä¾‹ï¼ˆprotected æ„é€ å‡½æ•°ï¼‰ï¼š

```ts
class Base {
  protected constructor() {}
}

class Derived extends Base {
  constructor() {
    super() // âœ… å­ç±»å¯ä»¥è°ƒç”¨
  }
}

// new Base(); // âŒ é”™è¯¯
new Derived() // âœ… æ­£ç¡®
```

## 11. ğŸ¤” æ¥å£æˆ–ç±»å‹å®šä¹‰ä¸­èƒ½ä½¿ç”¨ private/protected å—ï¼Ÿ

ä¸èƒ½ã€‚

æ¥å£ï¼ˆinterfaceï¼‰å’Œç±»å‹åˆ«åï¼ˆtypeï¼‰æè¿°çš„æ˜¯å…¬å…±å¥‘çº¦ï¼ˆpublic APIï¼‰ï¼Œåªå…³å¿ƒå¤–éƒ¨å¯è®¿é—®çš„éƒ¨åˆ†ã€‚å› æ­¤ï¼š

- æ¥å£ä¸­ä¸èƒ½åŒ…å« `private` æˆ– `protected` æˆå‘˜ã€‚
- ç±»å®ç°æ¥å£æ—¶ï¼Œæ¥å£åªæ£€æŸ¥å…¶ public æˆå‘˜æ˜¯å¦åŒ¹é…ã€‚

ä¾‹å¦‚ï¼š

```ts
interface HasName {
  name: string // éšå« public
}

class Person implements HasName {
  private name: string // âŒ é”™è¯¯ï¼æ¥å£è¦æ±‚ public name
  // å¿…é¡»å†™æˆ public name æˆ–ä¸åŠ ä¿®é¥°ç¬¦
}
// Class 'Person' incorrectly implements interface 'HasName'.
//   Property 'name' is private in type 'Person' but not in type 'HasName'.(2420)
```

è¿™ä¹Ÿä½“ç°äº† TypeScript çš„è®¾è®¡å“²å­¦ï¼šæ¥å£ç”¨äºæè¿°â€œå¤–éƒ¨å¦‚ä½•çœ‹å¾…ä¸€ä¸ªå¯¹è±¡â€ï¼Œè€Œè®¿é—®ä¿®é¥°ç¬¦ç”¨äºæ§åˆ¶â€œå†…éƒ¨å¦‚ä½•ç»„ç»‡å®ç°â€ã€‚

## 12. ğŸ”— å¼•ç”¨

- [Classes ç±»][1]
- [JavaScriptâ€™s private fields (#)][2]

[1]: https://www.typescriptlang.org/docs/handbook/2/classes.html
[2]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes/Private_elements
